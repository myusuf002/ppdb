/*

 FullCalendar v1.5.1
 http://arshaw.com/fullcalendar/

 Use fullcalendar.css for basic styling.
 For event drag & drop, requires jQuery UI draggable.
 For event resizing, requires jQuery UI resizable.

 Copyright (c) 2011 Adam Shaw
 Dual licensed under the MIT and GPL licenses, located in
 MIT-LICENSE.txt and GPL-LICENSE.txt respectively.

 Date: Sat Apr 9 14:09:51 2011 -0700

*/
(function(a,b){function e(b){a.extend(!0,ja,b)}function c(e,c,B){function m(){e.addClass("fc");c.isRTL&&e.addClass("fc-rtl");c.theme&&e.addClass("ui-widget");K=a("<div class='fc-content' style='position:relative'/>").prependTo(e);Q=new d(A,c);(aa=Q.render())&&e.prepend(aa);l(c.defaultView);a(window).resize(u);0===a("body")[0].offsetWidth&&X();var b=a(".fc-view-"+c.defaultView,e).height();setTimeout(function(){a(".fc-view-search",e).css("height",b).hide()},200)}function X(){setTimeout(function(){y.start||
0===a("body")[0].offsetWidth||ea()},0)}function l(b){if(!y||b!=y.name){M++;ca();var c=y,d;c?((c.beforeHide||cb)(),Ja(K,K.height()),c.element.hide()):Ja(K,1);K.css("overflow","hidden");(y=ga[b])?y.element.show():y=ga[b]=new ka[b](d=Z=a("<div class='fc-view fc-view-"+b+"' style='position:absolute'/>").appendTo(K),A);a("#b_search_cal").hasClass("ui-state-active")&&a("#b_search_cal").trigger("click");c&&Q.deactivateButton(c.name);Q.activateButton(b);ea();K.css("overflow","");c&&Ja(K,1);d||(y.afterShow||
cb)();M--}}function ea(a){if(0!==G.offsetWidth){M++;ca();pa===b&&n();var d=!1;!y.start||a||N<y.start||N>=y.end?(y.render(N,a||0),t(!0),d=!0):y.sizeDirty?(y.clearEvents(),t(),d=!0):y.eventsDirty&&(y.clearEvents(),d=!0);y.sizeDirty=!1;y.eventsDirty=!1;a=d;!c.lazyFetching||v(y.visStart,y.visEnd)?q():a&&r();va=e.outerWidth();Q.updateTitle(y.title);a=new Date;a>=y.start&&a<y.end?Q.disableButton("today"):Q.enableButton("today");M--;y.trigger("viewDisplay",G)}}function Ka(){ia();0!==G.offsetWidth&&(n(),
t(),ca(),y.clearEvents(),y.renderEvents(O),y.sizeDirty=!1)}function ia(){a.each(ga,function(a,b){b.sizeDirty=!0})}function n(){pa=c.contentHeight?c.contentHeight:c.height?c.height-(aa?aa.height():0)-Ba(K):Math.round(K.width()/Math.max(c.aspectRatio,.5))}function t(a){M++;y.setHeight(pa,a);Z&&(Z.css("position","relative"),Z=null);y.setWidth(K.width(),a);M--}function u(){if(!M)if(y.start){var a=++P;setTimeout(function(){a!=P||M||0===G.offsetWidth||va==(va=e.outerWidth())||(M++,Ka(),y.trigger("windowResize",
G),M--)},200)}else X()}function q(){x(y.visStart,y.visEnd)}function r(a){z();0!==G.offsetWidth&&(y.clearEvents(),y.renderEvents(O,a),y.eventsDirty=!1)}function z(){a.each(ga,function(a,b){b.eventsDirty=!0})}function ca(){y&&y.unselect()}var A=this;A.options=c;A.render=function(a){K?(n(),ia(),z(),ea(a)):m()};A.destroy=function(){a(window).unbind("resize",u);Q.destroy();K.remove();e.removeClass("fc fc-rtl ui-widget")};A.refetchEvents=q;A.reportEvents=function(a){O=a;r()};A.reportEventChange=function(a){r(a)};
A.rerenderEvents=r;A.changeView=l;A.select=function(a,c,d){y.select(a,c,d===b?!0:d)};A.unselect=ca;A.prev=function(){ea(-1)};A.next=function(){ea(1)};A.prevYear=function(){g(N,-1);ea()};A.nextYear=function(){g(N,1);ea()};A.today=function(){N=new Date;ea()};A.gotoDate=function(a,b,c){a instanceof Date?N=p(a):C(N,a,b,c);ea()};A.incrementDate=function(a,c,d){a!==b&&g(N,a);c!==b&&k(N,c);d!==b&&h(N,d);ea()};A.formatDate=function(a,b){return D(a,b,c)};A.formatDates=function(a,b,d){return la(a,b,d,c)};A.getDate=
function(){return p(N)};A.getView=function(){return y};A.option=function(a,d){if(d===b)return c[a];if("height"==a||"contentHeight"==a||"aspectRatio"==a)c[a]=d,Ka()};A.trigger=function(a,b){if(c[a])return c[a].apply(b||G,Array.prototype.slice.call(arguments,2))};f.call(A,c,B);var v=A.isFetchNeeded,x=A.fetchEvents,G=e[0],Q,aa,K,y,ga={},va,pa,Z,P=0,M=0,N=new Date,O=[],J;C(N,c.year,c.month,c.date);c.droppable&&a(document).bind("dragstart",function(b,d){var e=b.target,f=a(e);if(!f.parents(".fc").length){var I=
c.dropAccept;if(a.isFunction(I)?I.call(e,f):f.is(I))J=e,y.dragStart(J,b,d)}}).bind("dragstop",function(a,b){J&&(y.dragStop(J,a,b),J=null)})}function d(b,c){function d(e){var h=a("<td class='fc-header-"+e+"'/>");(e=c.header[e])&&a.each(e.split(" "),function(d){0<d&&h.append("<span class='fc-header-space'/>");var e;a.each(this.split(","),function(d,B){if("title"==B)h.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),e&&e.addClass(f+"-corner-right"),e=null;else{var g;b[B]?g=b[B]:ka[B]&&
(g=function(){k.removeClass(f+"-state-hover");b.changeView(B)});if(g){var p=c.theme?Qa(c.buttonIcons,B):null,m=Qa(c.buttonText,B),k=a("<span class='fc-button fc-button-"+B+" "+f+"-state-default'><span class='fc-button-inner'><span class='fc-button-content'>"+(p?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+p+"'/></span>":m)+"</span><span class='fc-button-effect'><span></span></span></span></span>");k&&(k.click(function(){k.hasClass(f+"-state-disabled")||g()}).mousedown(function(){k.not("."+
f+"-state-active").not("."+f+"-state-disabled").addClass(f+"-state-down")}).mouseup(function(){k.removeClass(f+"-state-down")}).hover(function(){k.not("."+f+"-state-active").not("."+f+"-state-disabled").addClass(f+"-state-hover")},function(){k.removeClass(f+"-state-hover").removeClass(f+"-state-down")}).appendTo(h),e||k.addClass(f+"-corner-left"),e=k)}}});e&&e.addClass(f+"-corner-right")});return h}this.render=function(){f=c.theme?"ui":"fc";if(c.header)return e=a("<table class='fc-header' style='width:100%'/>").append(a("<tr/>").append(d("left")).append(d("center")).append(d("right")))};
this.destroy=function(){e.remove()};this.updateTitle=function(a){e.find("h2").html(a)};this.activateButton=function(a){e.find("span.fc-button-"+a).addClass(f+"-state-active")};this.deactivateButton=function(a){e.find("span.fc-button-"+a).removeClass(f+"-state-active")};this.disableButton=function(a){e.find("span.fc-button-"+a).addClass(f+"-state-disabled")};this.enableButton=function(a){e.find("span.fc-button-"+a).removeClass(f+"-state-disabled")};var e=a([]),f}function f(c,d){function e(a,b){f(a,
function(c){if(b==ca){if(c){for(var d=0;d<c.length;d++)c[d].source=a,g(c[d]);x=x.concat(c)}A--;A||t(x)}})}function f(b,d){var e,h=S.sourceFetchers,B;for(e=0;e<h.length;e++){B=h[e](b,r,C,d);if(!0===B)return;if("object"==typeof B){f(B,d);return}}if(e=b.events)a.isFunction(e)?(v++||l("loading",null,!0),e(p(r),p(C),function(a){d(a);--v||l("loading",null,!1)})):a.isArray(e)?d(e):d();else if(b.url){var g=b.success,ob=b.error,m=b.complete;e=a.extend({},b.data||{});h=Ca(b.startParam,c.startParam);B=Ca(b.endParam,
c.endParam);h&&(e[h]=Math.round(+r/1E3));B&&(e[B]=Math.round(+C/1E3));v++||l("loading",null,!0);a.ajax(a.extend({},qb,b,{data:e,success:function(b){b=b||[];var c=La(g,this,arguments);a.isArray(c)&&(b=c);d(b)},error:function(){La(ob,this,arguments);d()},complete:function(){La(m,this,arguments);--v||l("loading",null,!1)}}))}else d()}function h(b){a.isFunction(b)||a.isArray(b)?b={events:b}:"string"==typeof b&&(b={url:b});if("object"==typeof b){var d=b;d.className?"string"==typeof d.className&&(d.className=
d.className.split(/\s+/)):d.className=[];for(var c=S.sourceNormalizers,e=0;e<c.length;e++)c[e](d);q.push(b);return b}}function g(a){var d=a.source||{},e=Ca(d.ignoreTimezone,c.ignoreTimezone);a._id=a._id||(a.id===b?"_fc"+rb++:a.id+"");a.date&&(a.start||(a.start=a.date),delete a.date);a._start=p(a.start=z(a.start,e));a.end=z(a.end,e);a.end&&a.end<=a.start&&(a.end=null);a._end=a.end?p(a.end):null;a.allDay===b&&(a.allDay=Ca(d.allDayDefault,c.allDayDefault));a.className?"string"==typeof a.className&&(a.className=
a.className.split(/\s+/)):a.className=[]}function m(a,b){return a&&b&&k(a)==k(b)}function k(a){return("object"==typeof a?a.events||a.url:"")||a}this.isFetchNeeded=function(a,b){return!r||a<r||b>C};this.fetchEvents=function(a,b){r=a;C=b;x=[];var d=++ca,c=q.length;A=c;for(var f=0;f<c;f++)e(q[f],d)};this.addEventSource=function(a){if(a=h(a))A++,e(a,ca)};this.removeEventSource=function(b){q=a.grep(q,function(a){return!m(a,b)});x=a.grep(x,function(a){return!m(a.source,b)});t(x)};this.updateEvent=function(a){var b,
d=x.length,c,e=n().defaultEventEnd,f=a.start-a._start,I=a.end?a.end-(a._end||e(a)):0;for(b=0;b<d;b++)c=x[b],c._id==a._id&&c!=a&&(c.start=new Date(+c.start+f),c.end=a.end?c.end?new Date(+c.end+I):new Date(+e(c)+I):null,c.title=a.title,c.url=a.url,c.allDay=a.allDay,c.className=a.className,c.editable=a.editable,c.color=a.color,c.backgroudColor=a.backgroudColor,c.borderColor=a.borderColor,c.textColor=a.textColor,g(c));g(a);t(x)};this.renderEvent=function(a,b){g(a);a.source||(b&&(u.events.push(a),a.source=
u),x.push(a));t(x)};this.removeEvents=function(b){if(b){if(!a.isFunction(b)){var c=b+"";b=function(a){return a._id==c}}x=a.grep(x,b,!0);for(d=0;d<q.length;d++)a.isArray(q[d].events)&&(q[d].events=a.grep(q[d].events,b,!0))}else{x=[];for(var d=0;d<q.length;d++)a.isArray(q[d].events)&&(q[d].events=[])}t(x)};this.clientEvents=function(b){return a.isFunction(b)?a.grep(x,b):b?(b+="",a.grep(x,function(a){return a._id==b})):x};this.normalizeEvent=g;for(var l=this.trigger,n=this.getView,t=this.reportEvents,
u={events:[]},q=[u],r,C,ca=0,A=0,v=0,x=[],G=0;G<d.length;G++)h(d[G])}function g(a,b,c){a.setFullYear(a.getFullYear()+b);c||q(a);return a}function k(a,b,c){if(+a){b=a.getMonth()+b;var d=p(a);d.setDate(1);d.setMonth(b);a.setMonth(b);for(c||q(a);a.getMonth()!=d.getMonth();)a.setDate(a.getDate()+(a<d?1:-1))}return a}function h(a,b,d){if(+a){b=a.getDate()+b;var c=p(a);c.setHours(9);c.setDate(b);a.setDate(b);d||q(a);l(a,c)}return a}function l(a,b){if(+a)for(;a.getDate()!=b.getDate();)a.setTime(+a+(a<b?
1:-1)*sb)}function m(a,b){a.setMinutes(a.getMinutes()+b);return a}function q(a){a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a}function p(a,b){return b?q(new Date(+a)):new Date(+a)}function n(){var a=0,b;do b=new Date(1970,a++,1);while(b.getHours());return b}function u(a,b,c){for(b=b||1;!a.getDay()||c&&1==a.getDay()||!c&&6==a.getDay();)h(a,b);return a}function r(a,b){return Math.round((p(a,!0)-p(b,!0))/864E5)}function C(a,c,d,e){c!==b&&c!=a.getFullYear()&&(a.setDate(1),
a.setMonth(0),a.setFullYear(c));d!==b&&d!=a.getMonth()&&(a.setDate(1),a.setMonth(d));e!==b&&a.setDate(e)}function z(a,c){if("object"==typeof a)return a;if("number"==typeof a)return new Date(1E3*a);if("string"==typeof a){if(a.match(/^\d+(\.\d+)?$/))return new Date(1E3*parseFloat(a));c===b&&(c=!0);return F(a,c)||(a?new Date(a):null)}return null}function F(a,b){var c=a.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);
if(!c)return null;var d=new Date(c[1],0,1);if(b||!c[13]){var e=new Date(c[1],0,1,9,0);c[3]&&(d.setMonth(c[3]-1),e.setMonth(c[3]-1));c[5]&&(d.setDate(c[5]),e.setDate(c[5]));l(d,e);c[7]&&d.setHours(c[7]);c[8]&&d.setMinutes(c[8]);c[10]&&d.setSeconds(c[10]);c[12]&&d.setMilliseconds(1E3*Number("0."+c[12]));l(d,e)}else d.setUTCFullYear(c[1],c[3]?c[3]-1:0,c[5]||1),d.setUTCHours(c[7]||0,c[8]||0,c[10]||0,c[12]?1E3*Number("0."+c[12]):0),c[14]&&(e=60*Number(c[16])+(c[18]?Number(c[18]):0),e*="-"==c[15]?1:-1,
d=new Date(+d+6E4*e));return d}function L(a){if("number"==typeof a)return 60*a;if("object"==typeof a)return 60*a.getHours()+a.getMinutes();if(a=a.match(/(\d+)(?::(\d+))?\s*(\w+)?/)){var b=parseInt(a[1],10);a[3]&&(b%=12,"p"==a[3].toLowerCase().charAt(0)&&(b+=12));return 60*b+(a[2]?parseInt(a[2],10):0)}}function D(a,b,c){return la(a,null,b,c)}function la(a,b,c,d){d=d||ja;var e=a,f=b,h,g=c.length,p,m,k,l="";for(h=0;h<g;h++)if(p=c.charAt(h),"'"==p)for(m=h+1;m<g;m++){if("'"==c.charAt(m)){e&&(l=m==h+1?
l+"'":l+c.substring(h+1,m),h=m);break}}else if("("==p)for(m=h+1;m<g;m++){if(")"==c.charAt(m)){h=D(e,c.substring(h+1,m),d);parseInt(h.replace(/\D/,""),10)&&(l+=h);h=m;break}}else if("["==p)for(m=h+1;m<g;m++){if("]"==c.charAt(m)){p=c.substring(h+1,m);h=D(e,p,d);h!=D(f,p,d)&&(l+=h);h=m;break}}else if("{"==p)e=b,f=a;else if("}"==p)e=a,f=b;else{for(m=g;m>h;m--)if(k=tb[c.substring(h,m)]){e&&(l+=k(e,d));h=m-1;break}m==h&&e&&(l+=p)}return l}function T(a){if(a.end){var b=a.end;a=a.allDay;b=p(b);return a||
b.getHours()||b.getMinutes()?h(b,1):q(b)}return h(p(a.start),1)}function ba(a,b){return 100*(b.msLength-a.msLength)+(a.event.start-b.event.start)}function Da(a,b){return a.end>b.start&&a.start<b.end}function da(a,b,c,d){var e=[],f,h=a.length,g,m,k,l,q;for(f=0;f<h;f++)g=a[f],m=g.start,k=b[f],k>c&&m<d&&(m<c?(m=p(c),l=!1):l=!0,k>d?(k=p(d),q=!1):q=!0,e.push({event:g,start:m,end:k,isStart:l,isEnd:q,msLength:k-m}));return e.sort(ba)}function ma(a){var b=[],c,d=a.length,e,f,h,g;for(c=0;c<d;c++){e=a[c];for(f=
0;;){h=!1;if(b[f])for(g=0;g<b[f].length;g++)if(Da(b[f][g],e)){h=!0;break}if(h)f++;else break}b[f]?b[f].push(e):b[f]=[e]}return b}function Ea(c,d,e){c.unbind("mouseover").mouseover(function(c){for(var f=c.target,h;f!=this;)h=f,f=f.parentNode;(f=h._fci)!==b&&(h._fci=b,h=d[f],e(h.event,h.element,h),a(c.target).trigger(c));c.stopPropagation()})}function Fa(b,c,d){for(var e=0,f;e<b.length;e++)f=a(b[e]),f.width(Math.max(0,c-Ra(f,d)))}function eb(b,c,d){for(var e=0,f;e<b.length;e++)f=a(b[e]),f.height(Math.max(0,
c-Ba(f,d)))}function Ra(b,c){var d=(parseFloat(a.css(b[0],"paddingLeft",!0))||0)+(parseFloat(a.css(b[0],"paddingRight",!0))||0),e;e=(parseFloat(a.css(b[0],"borderLeftWidth",!0))||0)+(parseFloat(a.css(b[0],"borderRightWidth",!0))||0);d+=e;e=c?(parseFloat(a.css(b[0],"marginLeft",!0))||0)+(parseFloat(a.css(b[0],"marginRight",!0))||0):0;return d+e}function Ba(b,c){var d=(parseFloat(a.css(b[0],"paddingTop",!0))||0)+(parseFloat(a.css(b[0],"paddingBottom",!0))||0),e;e=(parseFloat(a.css(b[0],"borderTopWidth",
!0))||0)+(parseFloat(a.css(b[0],"borderBottomWidth",!0))||0);return d+e+(c?fb(b):0)}function fb(b){return(parseFloat(a.css(b[0],"marginTop",!0))||0)+(parseFloat(a.css(b[0],"marginBottom",!0))||0)}function Ja(a,b){b="number"==typeof b?b+"px":b;a.each(function(a,c){c.style.cssText+=";min-height:"+b+";_height:"+b})}function cb(){}function gb(a,b){return a-b}function wa(a){return(10>a?"0":"")+a}function Qa(a,c){if(a[c]!==b)return a[c];for(var d=c.split(/(?=[A-Z])/),e=d.length-1,f;0<=e;e--)if(f=a[d[e].toLowerCase()],
f!==b)return f;return a[""]}function xa(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function hb(a){return a.id+"/"+a.className+"/"+a.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/ig,"")}function Ma(a){a.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function Na(a){a.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}
function Sa(a,b){a.each(function(a,c){c.className=c.className.replace(/^fc-\w*/,"fc-"+ub[b.getDay()])})}function ib(a,b){var c=a.source||{},d=a.color,e=c.color,f=b("eventColor"),h=a.backgroundColor||d||c.backgroundColor||e||b("eventBackgroundColor")||f,d=a.borderColor||d||c.borderColor||e||b("eventBorderColor")||f,c=a.textColor||c.textColor||b("eventTextColor"),e=[];h&&e.push("background-color:"+h);d&&e.push("border-color:"+d);c&&e.push("color:"+c);return e.join(";")}function La(b,c,d){a.isFunction(b)&&
(b=[b]);if(b){var e,f;for(e=0;e<b.length;e++)f=b[e].apply(c,d)||f;return f}}function Ca(){for(var a=0;a<arguments.length;a++)if(arguments[a]!==b)return arguments[a]}function vb(b,c,d){function e(b){var c=q(new Date),d;aa.each(function(e,f){t.curYear||(t.curYear=t.start);var g=p(t.start);g.setFullYear(g.getFullYear(),e,1);g.setFullYear(g.getFullYear(),e,1-g.getDay());a(f).find("td").each(function(f,p){var m;d=a(p);g.getMonth()==e?(d.removeClass("fc-other-month"),m=A(g,"-yyyy-MM-dd")):(d.addClass("fc-other-month"),
m=" ui-state-disabled");+g==+c&&g.getMonth()==e?d.addClass(H+"-state-highlight fc-today"):d.removeClass(H+"-state-highlight fc-today");var k=d.find("div.fc-day-number");k.text(g.getDate());var B=k.parent().parent();b||(k=B.attr("class").split(" "),a.each(k,function(a,b){-1!==b.indexOf("fc-day")&&B.removeClass(b);B.removeClass("ui-state-disabled")}));B.addClass(H+"-widget-content fc-day"+m);h(g,1)})});Q.filter(".fc-year-have-event").removeClass("fc-year-have-event ui-state-default")}function f(a){if(u("selectable")){var b=
this.className.search("fc-day-");-1!=b&&(b=this.className.substring(b+7,b+7+10),b=b.split("-"),b=new Date(parseInt(b[0],10),parseInt(b[1],10)-1,parseInt(b[2],10),0,0,0),w("reportDayClick",this,b,!0,a))}}function g(a,b,c){c&&M.build();c=p(t.visStart);for(var d=h(p(c),P),e=0;e<Z;e++){var k=new Date(Math.max(c,a)),B=new Date(Math.min(d,b));if(k<B){var l;J?(l=r(B,c)*E+R+1,k=r(k,c)*E+R+1):(l=r(k,c),k=r(B,c));m(e,l,e,k-1).click(f)}h(c,7);h(d,7)}}function m(a,c,d,e){a=M.rect(a,c,d,e,b);return C(a,b)}function k(a){return{row:Math.floor(r(a,
t.visStart)/7),col:n(a.getDay())}}function l(a){var b=a.row;a=a.col;return h(p(t.visStart),7*b+a*E+R)}function n(a){return(a-Math.max(Y,V)+P)%P*E+R}var t=this;t.renderYear=function(c,d,g,m){Z=d;P=g;(J=u("isRTL"))?(E=-1,R=P-1):(E=1,R=0);Y=u("firstDay");V=u("weekends")?0:1;H=u("theme")?"ui":"fc";u("columnFormat");if(c=!v){g=H+"-widget-header";var k=H+"-widget-content",B,l,q,n=p(t.start),Ka=ja.dayNamesShortest,ia=ja.monthNames;d="<table class='fc-border-separate fc-year-main-table' style='width:100%'><tr >";
for(var r=0;12>r;r++){n.setFullYear(n.getFullYear(),r,1);n.setFullYear(n.getFullYear(),r,1-n.getDay());0==r%3&&0<r&&(d+="</tr><tr>");d+="<td class='fc-year-monthly-td ui-widget'>";d+="<table class='ui-widget' style='width:100%' cellspacing='0'><thead><tr><th colspan='7' class='fc-year-monthly-header "+g+"' style='height:18px'>"+ia[r]+"</th></tr><tr>";for(B=0;B<P;B++)d+="<th class='fc-year-month-weekly-head'>"+Ka[B]+"</th>";d+="</tr></thead><tbody>";for(B=0;6>B;B++){d+="<tr class='ui-widget-content fc-week"+
B+"'>";for(l=0;l<P;l++)q=n.getMonth()==r?A(n,"-yyyy-MM-dd"):"",d+="<td style='height:32px' class='fc- "+k+" fc-day"+q+"'><div>"+(m?"<div class='fc-day-number'/>":"")+"<div class='fc-day-content'></div></div></td>",h(n,1);d+="</tr>"}d+="</tbody></table>";d+="</td>"}v=a(d+"</tr></table>").appendTo(b);x=v.find("thead");G=x.find("th");aa=v.find("table");Q=v.find("table tr td");Q.click(f);y=a("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(b)}else z();e(c)};t.setHeight=function(a){va=
a;a=va-x.height();v.parent().height(a).css("overflow-y","auto")};t.setWidth=function(a){};t.renderDayOverlay=g;t.defaultSelectionEnd=function(a,b){return p(a)};t.renderSelection=function(a,b,c){g(a,h(p(b),1),!0)};t.clearSelection=function(){ca()};t.reportDayClick=function(a,b,c){var d=k(a);w("dayClick",K[d.row*P+d.col],a,b,c)};t.dragStart=function(a,b,c){N.start(function(a){ca();a&&m(a.row,a.col,a.row,a.col)},b)};t.dragStop=function(a,b,c){var d=N.stop();ca();d&&(d=l(d),w("drop",a,d,!0,b,c))};t.defaultEventEnd=
function(a){return p(a.start)};t.getHoverListener=function(){return N};t.colContentLeft=function(a){return O.left(a)};t.colContentRight=function(a){return O.right(a)};t.dayOfWeekCol=n;t.dateCell=k;t.cellDate=l;t.cellIsAllDay=function(){return!0};t.allDayRow=function(a){return Q.eq(a)};t.allDayBounds=function(a){return{left:0,right:ga}};t.getRowCnt=function(){return Z};t.getColCnt=function(){return P};t.getColWidth=function(){return pa};t.getBodyRows=function(){return Q};t.getDaySegmentContainer=function(){return y};
Ta.call(t,b,c,d);Ua.call(t);Va.call(t);wb.call(t);var u=t.opt,w=t.trigger,z=t.clearEvents,C=t.renderOverlay,ca=t.clearOverlays,A=c.formatDate,v,x,G,Q,aa,K,y,ga,va,pa,Z,P,M,N,O,J,E,R,Y,V,H;Ma(b.addClass("fc-grid"));M=new Wa(function(b,c){var d,e,f;G.each(function(b,h){d=a(h);e=d.offset().left;b&&(f[1]=e);f=[e];c[b]=f});f[1]=e+d.outerWidth();Q.each(function(c,h){c<Z&&(d=a(h),e=d.offset().top,c&&(f[1]=e),f=[e],b[c]=f)});f[1]=e+d.outerHeight()});N=new Xa(M);O=new Ya(function(a){return bodyCellTopInners.eq(a)})}
function wb(){function b(c){var e=p(d.visStart),f=p(d.visEnd),h,g,m=[];h=a.map(c,T);g=[];var k,l=c.length,n,q,u,I,t;for(k=0;k<l;k++)n=c[k],q=n.start,u=h[k],u>e&&q<f&&(q<e?(q=p(e),I=!1):I=!0,u>f?(u=p(f),t=!1):t=!0,g.push({event:n,start:q,end:u,isStart:I,isEnd:t,msLength:u-q}));e=g.sort(ba);c=[];h=e.length;for(f=0;f<h;f++){g=e[f];for(k=0;;){l=!1;if(c[k])for(n=0;n<c[k].length;n++)if(Da(c[k][n],g)){l=!0;break}if(l)k++;else break}c[k]?c[k].push(g):c[k]=[g]}for(e=0;e<c.length;e++)for(f=c[e],h=0;h<f.length;h++)g=
f[h],g.row=void 0,g.level=e,m.push(g);return m}function c(a,b){var d=C(),g;b.draggable({zIndex:9,delay:50,opacity:e("dragOpacity"),revertDuration:e("dragRevertDuration"),start:function(c,m){f("eventDragStart",b,a,c,m);u(a,b);d.start(function(c,d,f,m){b.draggable("option","revert",!c||!f&&!m);A();c?(g=7*f+m*(e("isRTL")?-1:1),ca(h(p(a.start),g),h(T(a),g))):g=0},c,"drag")},stop:function(c,e){d.stop();A();f("eventDragStop",b,a,c,e);g?r(this,a,g,0,a.allDay,c,e):(b.css("filter",""),q(a,b))}})}var d=this;
d.renderEvents=function(c,d){k(c);var e=b(c);try{var f=v();a("div.fc-day-content",f).html("");f.filter("td.fc-year-have-event").removeClass("fc-year-have-event ui-state-default");for(var g,m=0;m<e.length;m++)for(var B=p(e[m].start);B.getTime()<e[m].end.getTime();){g=f.filter(".fc-day-"+D(e[m].start,"yyyy-MM-dd"));g.addClass("fc-year-have-event ui-state-default");var l=a("div.fc-day-content",g).html();""!=a.trim(l)?a("div.fc-day-content",g).html(parseInt(l)+1):a("div.fc-day-content",g).html("1");h(B,
1)}}catch(n){alert("MyrenderDaySegs:"+n)}};d.compileDaySegs=b;d.clearEvents=function(){l();z().empty()};d.bindDaySeg=function(a,b,d){g(a)&&c(a,b);d.isEnd&&m(a)&&x(a,b,d);n(a,b)};Za.call(d);var e=d.opt,f=d.trigger,g=d.isEventDraggable,m=d.isEventResizable,k=d.reportEvents,l=d.reportEventClear,n=d.eventElementHandlers,q=d.showEvents,u=d.hideEvents,r=d.eventDrop,z=d.getDaySegmentContainer,C=d.getHoverListener,ca=d.renderDayOverlay,A=d.clearOverlays,v=d.getBodyRows,x=d.resizableDayEvent}function $a(b,
c,d){function e(b){var c=b||1==O,d=w.start.getMonth(),f=q(new Date),h,g,p;c&&aa.each(function(b,c){h=a(c);g=u(b);h.html(G(g,Ga));Sa(h,g)});ga.each(function(b,e){h=a(e);g=u(b);g.getMonth()==d?h.removeClass("fc-other-month"):h.addClass("fc-other-month");+g==+f?h.addClass(fa+"-state-highlight fc-today"):h.removeClass(fa+"-state-highlight fc-today");h.find("div.fc-day-number").text(g.getDate());c&&Sa(h,g)});y.each(function(b,c){p=a(c);b<O?(p.show(),b==O-1?p.addClass("fc-last"):p.removeClass("fc-last")):
p.hide()})}function f(a){if(!C("selectable")){var b=parseInt(this.className.match(/fc\-day(\d+)/)[1]),b=u(b);F("dayClick",this,b,!0,a)}}function g(a,b,c){c&&E.build();c=p(w.visStart);for(var d=h(p(c),J),e=0;e<O;e++){var k=new Date(Math.max(c,a)),B=new Date(Math.min(d,b));if(k<B){var l;V?(l=r(B,c)*H+U+1,k=r(k,c)*H+U+1):(l=r(k,c),k=r(B,c));m(e,l,e,k-1).click(f).mousedown(x)}h(c,7);h(d,7)}}function m(a,c,d,e){a=E.rect(a,c,d,e,b);return A(a,b)}function k(a){return{row:Math.floor(r(a,w.visStart)/7),col:z(a.getDay())}}
function l(a){return n(a.row,a.col)}function n(a,b){return h(p(w.visStart),7*a+b*H+U)}function u(a){return n(Math.floor(a/J),a%J)}function z(a){return(a-Math.max(oa,W)+J)%J*H+U}var w=this;w.renderBasic=function(c,d,h,g){O=d;J=h;(V=C("isRTL"))?(H=-1,U=J-1):(H=1,U=0);oa=C("firstDay");W=C("weekends")?0:1;fa=C("theme")?"ui":"fc";Ga=C("columnFormat");if(d=!K){var p=fa+"-widget-header",m=fa+"-widget-content",k;h="<table class='fc-border-separate' style='width:100%' cellspacing='0'><thead><tr>";for(k=0;k<
J;k++)h+="<th class='fc- "+p+"'/>";h+="</tr></thead><tbody>";for(k=0;k<c;k++){h+="<tr class='fc-week"+k+"'>";for(p=0;p<J;p++)h+="<td class='fc- "+m+" fc-day"+(k*J+p)+"'><div>"+(g?"<div class='fc-day-number'/>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";h+="</tr>"}c=a(h+"</tbody></table>").appendTo(b);Q=c.find("thead");aa=Q.find("th");K=c.find("tbody");y=K.find("tr");ga=K.find("td");L=ga.filter(":first-child");D=y.eq(0).find("div.fc-day-content div");
Na(Q.add(Q.find("tr")));Na(y);y.eq(0).addClass("fc-first");ga.click(f).mousedown(x);Z=a("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(b)}else ca();e(d)};w.setHeight=function(b){M=b;b=M-Q.height();var c,d,e;"variable"==C("weekMode")?c=d=Math.floor(b/(1==O?2:6)):(c=Math.floor(b/O),d=b-c*(O-1));L.each(function(b,f){b<O&&(e=a(f),Ja(e.find("> div"),(b==O-1?d:c)-Ba(e)))})};w.setWidth=function(a){P=a;Y.clear();N=Math.floor(P/J);Fa(aa.slice(0,-1),N)};w.renderDayOverlay=g;w.defaultSelectionEnd=
function(a,b){return p(a)};w.renderSelection=function(a,b,c){g(a,h(p(b),1),!0)};w.clearSelection=function(){v()};w.reportDayClick=function(a,b,c){var d=k(a);F("dayClick",ga[d.row*J+d.col],a,b,c)};w.dragStart=function(a,b,c){R.start(function(a){v();a&&m(a.row,a.col,a.row,a.col)},b)};w.dragStop=function(a,b,c){var d=R.stop();v();d&&(d=l(d),F("drop",a,d,!0,b,c))};w.defaultEventEnd=function(a){return p(a.start)};w.getHoverListener=function(){return R};w.colContentLeft=function(a){return Y.left(a)};w.colContentRight=
function(a){return Y.right(a)};w.dayOfWeekCol=z;w.dateCell=k;w.cellDate=l;w.cellIsAllDay=function(){return!0};w.allDayRow=function(a){return y.eq(a)};w.allDayBounds=function(a){return{left:0,right:P}};w.getRowCnt=function(){return O};w.getColCnt=function(){return J};w.getColWidth=function(){return N};w.getDaySegmentContainer=function(){return Z};Ta.call(w,b,c,d);Ua.call(w);Va.call(w);xb.call(w);var C=w.opt,F=w.trigger,ca=w.clearEvents,A=w.renderOverlay,v=w.clearOverlays,x=w.daySelectionMousedown,
G=c.formatDate,Q,aa,K,y,ga,L,D,Z,P,M,N,O,J,E,R,Y,V,H,U,oa,W,fa,Ga;Ma(b.addClass("fc-grid"));E=new Wa(function(b,c){var d,e,f;aa.each(function(b,h){d=a(h);e=d.offset().left;b&&(f[1]=e);f=[e];c[b]=f});f[1]=e+d.outerWidth();y.each(function(c,h){c<O&&(d=a(h),e=d.offset().top,c&&(f[1]=e),f=[e],b[c]=f)});f[1]=e+d.outerHeight()});R=new Xa(E);Y=new Ya(function(a){return D.eq(a)})}function xb(){function b(c){var e=v(),f=x(),g=p(d.visStart),f=h(p(g),f),m=a.map(c,T),k,l,n,q,u,I,t=[];for(k=0;k<e;k++){l=ma(da(c,
m,g,f));for(n=0;n<l.length;n++)for(q=l[n],u=0;u<q.length;u++)I=q[u],I.row=k,I.level=n,t.push(I);h(g,7);h(f,7)}return t}function c(a,b){var d=C(),g;b.draggable({zIndex:9,delay:50,opacity:e("dragOpacity"),revertDuration:e("dragRevertDuration"),start:function(c,m){f("eventDragStart",b,a,c,m);u(a,b);d.start(function(c,d,f,m){b.draggable("option","revert",!c||!f&&!m);A();c?(g=7*f+m*(e("isRTL")?-1:1),F(h(p(a.start),g),h(T(a),g))):g=0},c,"drag")},stop:function(c,e){d.stop();A();f("eventDragStop",b,a,c,e);
g?r(this,a,g,0,a.allDay,c,e):(b.css("filter",""),q(a,b))}})}var d=this;d.renderEvents=function(a,c){k(a);G(b(a),c)};d.compileDaySegs=b;d.clearEvents=function(){l();z().empty()};d.bindDaySeg=function(a,b,d){g(a)&&c(a,b);d.isEnd&&m(a)&&Q(a,b,d);n(a,b)};Za.call(d);var e=d.opt,f=d.trigger,g=d.isEventDraggable,m=d.isEventResizable,k=d.reportEvents,l=d.reportEventClear,n=d.eventElementHandlers,q=d.showEvents,u=d.hideEvents,r=d.eventDrop,z=d.getDaySegmentContainer,C=d.getHoverListener,F=d.renderDayOverlay,
A=d.clearOverlays,v=d.getRowCnt,x=d.getColCnt,G=d.renderDaySegs,Q=d.resizableDayEvent}function mb(c,d,e){function f(){function a(){W.scrollTop(d)}var b=n(),c=p(b);c.setHours(x("firstHour"));var d=w(b,c)+1;a();setTimeout(a,0)}function g(a){if(!x("selectable")){var b=Math.min(ha-1,Math.floor((a.pageX-P.offset().left-ra)/Oa)),c=z(b),d=this.parentNode.className.match(/fc-slot(\d+)/);d?(d=parseInt(d[1])*x("slotMinutes"),c.setHours(Math.floor(d/60)),c.setMinutes(d%60+sa),G("dayClick",J[b],c,!1,a)):G("dayClick",
J[b],c,!0,a)}}function k(a,b,c){c&&ta.build();var d=p(v.visStart);ka?(c=r(b,d)*ba+da+1,a=r(a,d)*ba+da+1):(c=r(a,d),a=r(b,d));c=Math.max(0,c);a=Math.min(ha,a);c<a&&l(0,c,0,a-1).click(g).mousedown(T)}function l(a,b,c,d){a=ta.rect(a,b,c,d,V);return aa(a,V)}function u(a,b){for(var c=p(v.visStart),d=h(p(c),1),e=0;e<ha;e++){var f=new Date(Math.max(c,a)),m=new Date(Math.min(d,b));if(f<m){var k=e*ba+da,k=ta.rect(0,k,0,k,fa),f=w(c,f),m=w(c,m);k.top=f;k.height=m-f;aa(k,fa).click(g).mousedown(ca)}h(c,1);h(d,
1)}}function ia(a){var b=z(a.col);a=a.row;x("allDaySlot")&&a--;0<=a&&m(b,sa+a*x("slotMinutes"));return b}function z(a){return h(p(v.visStart),a*ba+da)}function t(a){return x("allDaySlot")&&!a.row}function C(a){return(a-Math.max(ma,la)+ha)%ha*ba+da}function w(a,c){a=p(a,!0);if(c<m(p(a),sa))return 0;if(c>=m(p(a),ja))return qa.height();var d=x("slotMinutes"),e=60*c.getHours()+c.getMinutes()-sa,f=Math.floor(e/d),h=S[f];h===b&&(h=S[f]=qa.find("tr:eq("+f+") td div")[0].offsetTop);return Math.max(0,Math.round(h-
1+e%d/d*Ha))}function F(b,c){var d=x("selectHelper");ta.build();if(d){var e=r(b,v.visStart)*ba+da;if(0<=e&&e<ha){var e=ta.rect(0,e,0,e,fa),f=w(b,b),h=w(b,c);if(h>f){e.top=f;e.height=h-f;e.left+=2;e.width-=5;if(a.isFunction(d)){if(d=d(b,c))e.position="absolute",e.zIndex=8,na=a(d).css(e).appendTo(fa)}else e.isStart=!0,e.isEnd=!0,na=a(pa({title:"",start:b,end:c,className:["fc-select-helper"],editable:!1},e)),na.css("opacity",x("dragOpacity"));na&&(na.click(g).mousedown(ca),fa.append(na),Fa(na,e.width,
!0),eb(na,e.height,!0))}}}else u(b,c)}function D(){K();na&&(na.remove(),na=null)}function ca(b){if(1==b.which&&x("selectable")){ga(b);var c;Aa.start(function(a,b){D();if(a&&a.col==b.col&&!t(a)){var d=ia(b),e=ia(a);c=[d,m(p(d),x("slotMinutes")),e,m(p(e),x("slotMinutes"))].sort(gb);F(c[0],c[3])}else c=null},b);a(document).one("mouseup",function(a){Aa.stop();c&&(+c[0]==+c[1]&&A(c[0],!1,a),y(c[0],c[3],!1,a))})}}function A(a,b,c){G("dayClick",J[C(a.getDay())],a,b,c)}var v=this;v.renderAgenda=function(b){ha=
b;Ia=x("theme")?"ui":"fc";la=x("weekends")?0:1;ma=x("firstDay");(ka=x("isRTL"))?(ba=-1,da=ha-1):(ba=1,da=0);sa=L(x("minTime"));ja=L(x("maxTime"));Ea=x("columnFormat");if(P)Q();else{b=Ia+"-widget-header";var d=Ia+"-widget-content",e,f,h,k,l,B=0==x("slotMinutes")%15;e="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'><thead><tr><th class='fc-agenda-axis "+b+"'>&nbsp;</th>";for(f=0;f<ha;f++)e+="<th class='fc- fc-col"+f+" "+b+"'/>";e+="<th class='fc-agenda-gutter "+
b+"'>&nbsp;</th></tr></thead><tbody><tr><th class='fc-agenda-axis "+b+"'>&nbsp;</th>";for(f=0;f<ha;f++)e+="<td class='fc- fc-col"+f+" "+d+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";P=a(e+("<td class='fc-agenda-gutter "+d+"'>&nbsp;</td></tr></tbody></table>")).appendTo(c);M=P.find("thead");N=M.find("th").slice(1,-1);O=P.find("tbody");J=O.find("td").slice(0,-1);E=J.find("div.fc-day-content div");R=J.eq(0);Y=R.find("> div");Na(M.add(M.find("tr")));
Na(O.add(O.find("tr")));ya=M.find("th:first");za=P.find(".fc-agenda-gutter");V=a("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(c);x("allDaySlot")?(H=a("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(V),e="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+b+" fc-agenda-axis'>"+x("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+b+" fc-agenda-gutter'>&nbsp;</th></tr></table>",
U=a(e).appendTo(V),oa=U.find("tr"),oa.find("td").click(g).mousedown(T),ya=ya.add(U.find("th:first")),za=za.add(U.find("th.fc-agenda-gutter")),V.append("<div class='fc-agenda-divider "+b+"'><div class='fc-agenda-divider-inner'/></div>")):H=a([]);W=a("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(V);fa=a("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(W);Ga=a("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(fa);e=
"<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>";h=n();k=m(p(h),ja);m(h,sa);for(f=ab=0;h<k;f++)l=h.getMinutes(),e+="<tr class='fc-slot"+f+" "+(l?"fc-minor":"")+"'><th class='fc-agenda-axis "+b+"'>"+(B&&l?"&nbsp;":Z(h,x("axisFormat")))+"</th><td class='"+d+"'><div style='position:relative'>&nbsp;</div></td></tr>",m(h,x("slotMinutes")),ab++;e+="</tbody></table>";qa=a(e).appendTo(fa);jb=qa.find("div:first");qa.find("td").click(g).mousedown(ca);ya=ya.add(qa.find("th:first"))}h=
q(new Date);for(b=0;b<ha;b++)f=z(b),d=N.eq(b),d.html(Z(f,Ea)),e=J.eq(b),+f==+h?e.addClass(Ia+"-state-highlight fc-today"):e.removeClass(Ia+"-state-highlight fc-today"),Sa(d.add(e),f)};v.setWidth=function(b){kb=b;Pa.clear();ra=0;Fa(ya.width("").each(function(b,c){ra=Math.max(ra,a(c).outerWidth())}),ra);b=W[0].clientWidth;(bb=W.width()-b)?(Fa(za,bb),za.show().prev().removeClass("fc-last")):za.hide().prev().addClass("fc-last");Oa=Math.floor((b-ra)/ha);Fa(N.slice(0,-1),Oa)};v.setHeight=function(a,c){a===
b&&(a=lb);lb=a;S={};var d=O.position().top,e=W.position().top,h=Math.min(a-d,qa.height()+e+1);Y.height(h-Ba(R));V.css("top",d);W.height(h-e-1);Ha=jb.height()+1;c&&f()};v.beforeHide=function(){nb=W.scrollTop()};v.afterShow=function(){W.scrollTop(nb)};v.defaultEventEnd=function(a){var b=p(a.start);return a.allDay?b:m(b,x("defaultEventMinutes"))};v.timePosition=w;v.dayOfWeekCol=C;v.dateCell=function(a){return{row:Math.floor(r(a,v.visStart)/7),col:C(a.getDay())}};v.cellDate=ia;v.cellIsAllDay=t;v.allDayRow=
function(a){return oa};v.allDayBounds=function(){return{left:ra,right:kb-bb}};v.getHoverListener=function(){return Aa};v.colContentLeft=function(a){return Pa.left(a)};v.colContentRight=function(a){return Pa.right(a)};v.getDaySegmentContainer=function(){return H};v.getSlotSegmentContainer=function(){return Ga};v.getMinMinute=function(){return sa};v.getMaxMinute=function(){return ja};v.getBodyContent=function(){return fa};v.getRowCnt=function(){return 1};v.getColCnt=function(){return ha};v.getColWidth=
function(){return Oa};v.getSlotHeight=function(){return Ha};v.defaultSelectionEnd=function(a,b){return b?p(a):m(p(a),x("slotMinutes"))};v.renderDayOverlay=k;v.renderSelection=function(a,b,c){c?x("allDaySlot")&&k(a,h(p(b),1),!0):F(a,b)};v.clearSelection=D;v.reportDayClick=A;v.dragStart=function(a,b,c){Aa.start(function(a){K();if(a)if(t(a))l(a.row,a.col,a.row,a.col);else{a=ia(a);var b=m(p(a),x("defaultEventMinutes"));u(a,b)}},b)};v.dragStop=function(a,b,c){var d=Aa.stop();K();d&&G("drop",a,ia(d),t(d),
b,c)};Ta.call(v,c,d,e);Ua.call(v);Va.call(v);yb.call(v);var x=v.opt,G=v.trigger,Q=v.clearEvents,aa=v.renderOverlay,K=v.clearOverlays,y=v.reportSelection,ga=v.unselect,T=v.daySelectionMousedown,pa=v.slotSegHtml,Z=d.formatDate,P,M,N,O,J,E,R,Y,V,H,U,oa,W,fa,Ga,qa,jb,ya,za,na,kb,lb,ra,Oa,bb,Ha,nb,ha,ab,ta,Aa,Pa,S={},Ia,ma,la,ka,ba,da,sa,ja,Ea;Ma(c.addClass("fc-agenda"));ta=new Wa(function(b,c){var d,e,f;N.each(function(b,h){d=a(h);e=d.offset().left;b&&(f[1]=e);f=[e];c[b]=f});f[1]=e+d.outerWidth();x("allDaySlot")&&
(d=oa,e=d.offset().top,b[0]=[e,e+d.outerHeight()]);for(var h=fa.offset().top,g=W.offset().top,p=g+W.outerHeight(),m=0;m<ab;m++)b.push([Math.max(g,Math.min(p,h+Ha*m)),Math.max(g,Math.min(p,h+Ha*(m+1)))])});Aa=new Xa(ta);Pa=new Ya(function(a){return E.eq(a)})}function yb(){function c(b){b=ma(da(b,a.map(b,T),n.visStart,n.visEnd));var d,e=b.length,f,h,g,p=[];for(d=0;d<e;d++)for(f=b[d],h=0;h<f.length;h++)g=f[h],g.row=0,g.level=d,p.push(g);return p}function d(a){return a.end?p(a.end):m(p(a.start),u("defaultEventMinutes"))}
function e(a,b){var c="<",d=a.url,f=ib(a,u),h=f?" style='"+f+"'":"",g=["fc-event","fc-event-skin","fc-event-vert"];t(a)&&g.push("fc-event-draggable");b.isStart&&g.push("fc-corner-top");b.isEnd&&g.push("fc-corner-bottom");g=g.concat(a.className);a.source&&(g=g.concat(a.source.className||[]));c=d?c+("a href='"+xa(a.url)+"'"):c+"div";c+=" class='"+g.join(" ")+"' style='position:absolute;z-index:8;top:"+b.top+"px;left:"+b.left+"px;"+f+"'><div class='fc-event-inner fc-event-skin'"+h+"><div class='fc-event-head fc-event-skin'"+
h+"><div class='fc-event-time'>"+xa(W(a.start,a.end,u("timeFormat")))+"</div></div><div class='fc-event-content'><div class='fc-event-title'>"+xa(a.title)+"</div></div><div class='fc-event-bg'></div></div>";b.isEnd&&r(a)&&(c+="<div class='ui-resizable-handle ui-resizable-s'>=</div>");return c+("</"+(d?"a":"div")+">")}function f(a,b,c){var d=b.find("div.fc-event-time");t(a)&&k(a,b,d);c.isEnd&&r(a)&&l(a,b,d);D(a,b)}function g(a,b,c){function d(){m||(b.width(e).height("").draggable("option","grid",null),
m=!0)}var e,f,m=!0,k,n=u("isRTL")?-1:1,l=G(),B=P(),t=M(),I=aa();b.draggable({zIndex:9,opacity:u("dragOpacity","month"),revertDuration:u("dragRevertDuration"),start:function(g,I){q("eventDragStart",b,a,g,I);E(a,b);e=b.width();l.start(function(e,g,l,q){H();e?(f=!1,k=q*n,e.row?c?m&&(b.width(B-10),eb(b,t*Math.round((a.end?(a.end-a.start)/6E4:u("defaultEventMinutes"))/u("slotMinutes"))),b.draggable("option","grid",[B,1]),m=!1):f=!0:(V(h(p(a.start),k),h(T(a),k)),d()),f=f||m&&!k):(d(),f=!0);b.draggable("option",
"revert",f)},g,"drag")},stop:function(c,e){l.stop();H();q("eventDragStop",b,a,c,e);if(f)d(),b.css("filter",""),J(a,b);else{var h=0;m||(h=Math.round((b.offset().top-N().offset().top)/t)*u("slotMinutes")+I-(60*a.start.getHours()+a.start.getMinutes()));R(this,a,k,h,m,c,e)}}})}function k(a,b,c){function d(b){var e=m(p(a.start),b),f;a.end&&(f=m(p(a.end),b));c.text(W(e,f,u("timeFormat")))}function e(){g&&(c.css("display",""),b.draggable("option","grid",[r,v]),g=!1)}var f,g=!1,n,l,B,t=u("isRTL")?-1:1,I=
G(),x=Z(),r=P(),v=M();b.draggable({zIndex:9,scroll:!1,grid:[r,v],axis:1==x?"y":!1,opacity:u("dragOpacity"),revertDuration:u("dragRevertDuration"),start:function(d,m){q("eventDragStart",b,a,d,m);E(a,b);f=b.position();l=B=0;I.start(function(d,f,m,k){b.draggable("option","revert",!d);H();d&&(n=k*t,u("allDaySlot")&&!d.row?(g||(g=!0,c.hide(),b.draggable("option","grid",null)),V(h(p(a.start),n),h(T(a),n))):e())},d,"drag")},drag:function(a,b){l=Math.round((b.position.top-f.top)/v)*u("slotMinutes");l!=B&&
(g||d(l),B=l)},stop:function(c,h){var m=I.stop();H();q("eventDragStop",b,a,c,h);m&&(n||l||g)?R(this,a,n,g?0:l,g,c,h):(e(),b.css("filter",""),b.css(f),d(0),J(a,b))}})}function l(a,b,c){var d,e,f=M();b.resizable({handles:{s:"div.ui-resizable-s"},grid:f,start:function(c,f){d=e=0;E(a,b);b.css("z-index",9);q("eventResizeStart",this,a,c,f)},resize:function(h,g){d=Math.round((Math.max(f,b.height())-g.originalSize.height)/f);d!=e&&(c.text(W(a.start,d||a.end?m(z(a),u("slotMinutes")*d):null,u("timeFormat"))),
e=d)},stop:function(c,e){q("eventResizeStop",this,a,c,e);d?Y(this,a,0,u("slotMinutes")*d,c,e):(b.css("z-index",8),J(a,b))}})}var n=this;n.renderEvents=function(g,k){C(g);var l,t=g.length,r=[],v=[];for(l=0;l<t;l++)g[l].allDay?r.push(g[l]):v.push(g[l]);u("allDaySlot")&&(S(c(r),k),A());var t=Z(),r=aa(),z=Q(),ea=m(p(n.visStart),r),w=a.map(v,d),H,E,G,X,U,R;l=[];for(H=0;H<t;H++){G=E=ma(da(v,w,ea,m(p(ea),z-r)));var W=R=U=X=void 0,Y=void 0,V=void 0;for(X=G.length-1;0<X;X--)for(W=G[X],U=0;U<W.length;U++)for(Y=
W[U],R=0;R<G[X-1].length;R++)V=G[X-1][R],Da(Y,V)&&(V.forward=Math.max(V.forward||0,(Y.forward||0)+1));for(G=0;G<E.length;G++)for(X=E[G],U=0;U<X.length;U++)R=X[U],R.col=H,R.level=G,l.push(R);h(ea,1,!0)}var v=l.length,ua,F,D;E="";z={};ea={};H=x();t=Z();(G=u("isRTL"))?(X=-1,W=t-1):(X=1,W=0);for(t=0;t<v;t++)r=l[t],w=r.event,U=K(r.start,r.start),R=K(r.start,r.end),ua=r.col,Y=r.level,V=r.forward||0,F=y(ua*X+W),D=L(ua*X+W)-F,D=Math.min(D-6,.95*D),ua=Y?D/(Y+V+1):V?2*(D/(V+1)-6):D,Y=F+D/(Y+V+1)*Y*X+(G?D-ua:
0),r.top=U,r.left=Y,r.outerWidth=ua,r.outerHeight=R-U,E+=e(w,r);H[0].innerHTML=E;G=H.children();for(t=0;t<v;t++)r=l[t],w=r.event,E=a(G[t]),X=q("eventRender",w,w,E),!1===X?E.remove():(X&&!0!==X&&(E.remove(),E=a(X).css({position:"absolute",top:r.top,left:r.left}).appendTo(H)),r.element=E,w._id===k?f(w,E,r):E[0]._fci=t,O(w,E));Ea(H,l,f);for(t=0;t<v;t++)if(r=l[t],E=r.element)H=z[w=r.key=hb(E[0])],r.vsides=H===b?z[w]=Ba(E,!0):H,H=ea[w],r.hsides=H===b?ea[w]=Ra(E,!0):H,w=E.find("div.fc-event-content"),w.length&&
(r.contentTop=w[0].offsetTop);for(t=0;t<v;t++)if(r=l[t],E=r.element)E[0].style.width=Math.max(0,r.outerWidth-r.hsides)+"px",z=Math.max(0,r.outerHeight-r.vsides),E[0].style.height=z+"px",w=r.event,r.contentTop!==b&&10>z-r.contentTop&&(E.find("div.fc-event-time").text(oa(w.start,u("timeFormat"))+" - "+w.title),E.find("div.fc-event-title").remove()),q("eventAfterRender",w,w,E)};n.compileDaySegs=c;n.clearEvents=function(){F();v().empty();x().empty()};n.slotSegHtml=e;n.bindDaySeg=function(a,b,c){t(a)&&
g(a,b,c.isStart);c.isEnd&&r(a)&&ba(a,b,c);D(a,b)};Za.call(n);var u=n.opt,q=n.trigger,t=n.isEventDraggable,r=n.isEventResizable,z=n.eventEnd,C=n.reportEvents,F=n.reportEventClear,D=n.eventElementHandlers,A=n.setHeight,v=n.getDaySegmentContainer,x=n.getSlotSegmentContainer,G=n.getHoverListener,Q=n.getMaxMinute,aa=n.getMinMinute,K=n.timePosition,y=n.colContentLeft,L=n.colContentRight,S=n.renderDaySegs,ba=n.resizableDayEvent,Z=n.getColCnt,P=n.getColWidth,M=n.getSlotHeight,N=n.getBodyContent,O=n.reportEventElement,
J=n.showEvents,E=n.hideEvents,R=n.eventDrop,Y=n.eventResize,V=n.renderDayOverlay,H=n.clearOverlays,U=n.calendar,oa=U.formatDate,W=U.formatDates}function Ta(a,c,d){function e(a,b){var c=v[a];return"object"==typeof c?Qa(c,b||d):c}function f(a,b){return c.trigger.apply(c,[a,b||q].concat(Array.prototype.slice.call(arguments,2),[q]))}function g(a){return Ca(a.editable,(a.source||{}).editable,e("editable"))}function k(a){return a.end?p(a.end):r(a)}function l(a,b,c){a=A[a._id];var d,e=a.length;for(d=0;d<
e;d++)if(!b||a[d][0]!=b[0])a[d][c]()}function n(a,c,d,e){d=d||0;for(var f,g=a.length,p=0;p<g;p++)f=a[p],e!==b&&(f.allDay=e),m(h(f.start,c,!0),d),f.end&&(f.end=m(h(f.end,c,!0),d)),w(f,v)}function u(a,b,c){c=c||0;for(var d,e=a.length,f=0;f<e;f++)d=a[f],d.end=m(h(k(d),b,!0),c),w(d,v)}var q=this;q.element=a;q.calendar=c;q.name=d;q.opt=e;q.trigger=f;q.isEventDraggable=function(a){return g(a)&&!e("disableDragging")};q.isEventResizable=function(a){return g(a)&&!e("disableResizing")};q.reportEvents=function(a){C=
{};var b,c=a.length,d;for(b=0;b<c;b++)d=a[b],C[d._id]?C[d._id].push(d):C[d._id]=[d]};q.eventEnd=k;q.reportEventElement=function(a,b){F.push(b);A[a._id]?A[a._id].push(b):A[a._id]=[b]};q.reportEventClear=function(){F=[];A={}};q.eventElementHandlers=function(a,b){b.click(function(c){if(!b.hasClass("ui-draggable-dragging")&&!b.hasClass("ui-resizable-resizing"))return f("eventClick",this,a,c)}).hover(function(b){f("eventMouseover",this,a,b)},function(b){f("eventMouseout",this,a,b)})};q.showEvents=function(a,
b){l(a,b,"show")};q.hideEvents=function(a,b){l(a,b,"hide")};q.eventDrop=function(a,b,c,d,e,h,g){var m=b.allDay,p=b._id;n(C[p],c,d,e);f("eventDrop",a,b,c,d,e,function(){n(C[p],-c,-d,m);z(p)},h,g);z(p)};q.eventResize=function(a,b,c,d,e,h){var g=b._id;u(C[g],c,d);f("eventResize",a,b,c,d,function(){u(C[g],-c,-d);z(g)},e,h);z(g)};var r=q.defaultEventEnd,w=c.normalizeEvent,z=c.reportEventChange,C={},F=[],A={},v=c.options}function Za(){function c(a){var b=q("isRTL"),d,e=a.length,f,g,h,m;d=T();var p=d.left,
k=d.right,n,l,u,B,t,I="";for(d=0;d<e;d++)f=a[d],g=f.event,m=["fc-event","fc-event-skin","fc-event-hori"],r(g)&&m.push("fc-event-draggable"),b?(f.isStart&&m.push("fc-corner-right"),f.isEnd&&m.push("fc-corner-left"),n=S(f.end.getDay()-1),l=S(f.start.getDay()),u=f.isEnd?K(n):p,B=f.isStart?y(l):k):(f.isStart&&m.push("fc-corner-left"),f.isEnd&&m.push("fc-corner-right"),n=S(f.start.getDay()),l=S(f.end.getDay()-1),u=f.isStart?K(n):p,B=f.isEnd?y(l):k),m=m.concat(g.className),g.source&&(m=m.concat(g.source.className||
[])),h=g.url,t=ib(g,q),I=h?I+("<a href='"+xa(h)+"'"):I+"<div",I+=" class='"+m.join(" ")+"' style='position:absolute;z-index:8;left:"+u+"px;"+t+"'><div class='fc-event-inner fc-event-skin'"+(t?" style='"+t+"'":"")+">",!g.allDay&&f.isStart&&(I+="<span class='fc-event-time'>"+xa(M(g.start,g.end,q("timeFormat")))+"</span>"),I+="<span class='fc-event-title'>"+xa(g.title)+"</span></div>",f.isEnd&&w(g)&&(I+="<div class='ui-resizable-handle ui-resizable-"+(b?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),I+="</"+
(h?"a":"div")+">",f.left=u,f.outerWidth=B-u,f.startCol=n,f.endCol=l+1;return I}function d(b,c){var e,f=b.length,g,h,m;for(e=0;e<f;e++)g=b[e],h=g.event,m=a(c[e]),h=u("eventRender",h,h,m),!1===h?m.remove():(h&&!0!==h&&(h=a(h).css({position:"absolute",left:g.left}),m.replaceWith(h),m=h),g.element=m)}function e(a){var c,d=a.length,f,g,h,m,p={};for(c=0;c<d;c++)if(f=a[c],g=f.element)h=f.key=hb(g[0]),m=p[h],m===b&&(m=p[h]=Ra(g,!0)),f.hsides=m}function f(a){var b,c=a.length,d,e;for(b=0;b<c;b++)if(d=a[b],
e=d.element)e[0].style.width=Math.max(0,d.outerWidth-d.hsides)+"px"}function g(a){var c,d=a.length,e,f,h,m,p={};for(c=0;c<d;c++)if(e=a[c],f=e.element)h=e.key,m=p[h],m===b&&(m=p[h]=fb(f)),e.outerHeight=f[0].offsetHeight+m}function m(){var a,b=x(),c=[];for(a=0;a<b;a++)c[a]=L(a).find("td:first div.fc-day-content > div");return c}function k(a){var b,c=a.length,d=[];for(b=0;b<c;b++)d[b]=a[b][0].offsetTop;return d}function l(a,b){var c,d=a.length,e,f;for(c=0;c<d;c++)if(e=a[c],f=e.element)f[0].style.top=
b[e.row]+(e.top||0)+"px",e=e.event,u("eventAfterRender",e,e,f)}var n=this;n.renderDaySegs=function(a,b){var h=Z(),p=x(),n=D(),u=0,q,r,t,w=a.length,z,v;h[0].innerHTML=c(a);d(a,h.children());r=a.length;for(q=0;q<r;q++)t=a[q],(v=t.element)&&C(t.event,v);r=a.length;var y;for(q=0;q<r;q++)if(t=a[q],v=t.element)y=t.event,y._id===b?P(y,v,t):v[0]._fci=q;Ea(h,a,P);e(a);f(a);g(a);h=m();for(q=0;q<p;q++){r=[];for(t=0;t<n;t++)r[t]=0;for(;u<w&&(z=a[u]).row==q;){t=r.slice(z.startCol,z.endCol);t=Math.max.apply(Math,
t);z.top=t;t+=z.outerHeight;for(v=z.startCol;v<z.endCol;v++)r[v]=t;u++}h[q].height(Math.max.apply(Math,r))}l(a,k(h))};n.resizableDayEvent=function(b,r,w){var C=q("isRTL"),y=C?"w":"e",L=r.find("div.ui-resizable-"+y),K=!1;Ma(r);r.mousedown(function(a){a.preventDefault()}).click(function(a){K&&(a.preventDefault(),a.stopImmediatePropagation())});L.mousedown(function(q){function L(c){u("eventResizeStop",this,b,c);a("body").css("cursor","");db.stop();O();S&&v(this,b,S,0,c);setTimeout(function(){K=!1},0)}
if(1==q.which){K=!0;var db=n.getHoverListener(),M=x(),P=D(),Q=C?-1:1,U=C?P-1:0,pb=r.css("top"),S,T,aa=a.extend({},b),ma=ba(b.start);J();a("body").css("cursor",y+"-resize").one("mouseup",L);u("eventResizeStart",this,b,q);db.start(function(n,q){if(n){var u=Math.max(ma.row,n.row),r=n.col;1==M&&(u=0);u==ma.row&&(r=C?Math.min(ma.col,r):Math.max(ma.col,r));S=7*u+r*Q+U-(7*q.row+q.col*Q+U);u=h(z(b),S,!0);if(S){aa.end=u;var r=T,t=da([aa]),v=w.row,x=a("<div/>"),D=Z(),ia=t.length,L;x[0].innerHTML=c(t);x=x.children();
D.append(x);d(t,x);e(t);f(t);g(t);l(t,k(m()));x=[];for(D=0;D<ia;D++)if(L=t[D].element)t[D].row===v&&L.css("top",pb),x.push(L[0]);T=a(x);T.find("*").css("cursor",y+"-resize");r&&r.remove();A(b)}else T&&(F(b),T.remove(),T=null);O();N(b.start,h(p(u),1))}},q)}})};var q=n.opt,u=n.trigger,r=n.isEventDraggable,w=n.isEventResizable,z=n.eventEnd,C=n.reportEventElement,F=n.showEvents,A=n.hideEvents,v=n.eventResize,x=n.getRowCnt,D=n.getColCnt,L=n.allDayRow,T=n.allDayBounds,K=n.colContentLeft,y=n.colContentRight,
S=n.dayOfWeekCol,ba=n.dateCell,da=n.compileDaySegs,Z=n.getDaySegmentContainer,P=n.bindDaySeg,M=n.calendar.formatDates,N=n.renderDayOverlay,O=n.clearOverlays,J=n.clearSelection}function Va(){function b(a){p&&(p=!1,m(),f("unselect",null,a))}function c(a,b,d,e){p=!0;f("select",null,a,b,d,e)}var d=this;d.select=function(a,d,e){b();d||(d=h(a,e));g(a,d,e);c(a,d,e)};d.unselect=b;d.reportSelection=c;d.daySelectionMousedown=function(f){var h=d.cellDate,p=d.cellIsAllDay,k=d.getHoverListener(),n=d.reportDayClick;
if(1==f.which&&e("selectable")){b(f);var l;k.start(function(a,b){m();a&&p(a)?(l=[h(b),h(a)].sort(gb),g(l[0],l[1],!0)):l=null},f);a(document).one("mouseup",function(a){k.stop();l&&(+l[0]==+l[1]&&n(l[0],!0,a),c(l[0],l[1],!0,a))})}};var e=d.opt,f=d.trigger,h=d.defaultSelectionEnd,g=d.renderSelection,m=d.clearSelection,p=!1;e("selectable")&&e("unselectAuto")&&a(document).mousedown(function(c){var d=e("unselectCancel");d&&a(c.target).parents(d).length||b(c)})}function Ua(){this.renderOverlay=function(d,
e){var f=c.shift();f||(f=a("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));f[0].parentNode!=e[0]&&f.appendTo(e);b.push(f.css(d).show());return f};this.clearOverlays=function(){for(var a;a=b.shift();)c.push(a.hide().unbind())};var b=[],c=[]}function Wa(a){var b,c;this.build=function(){b=[];c=[];a(b,c)};this.cell=function(a,d){var e=b.length,f=c.length,h,g=-1,m=-1;for(h=0;h<e;h++)if(d>=b[h][0]&&d<b[h][1]){g=h;break}for(h=0;h<f;h++)if(a>=c[h][0]&&a<c[h][1]){m=h;break}return 0<=
g&&0<=m?{row:g,col:m}:null};this.rect=function(a,d,e,f,h){h=h.offset();return{top:b[a][0]-h.top,left:c[d][0]-h.left,width:c[f][1]-c[d][0],height:b[e][1]-b[a][0]}}}function Xa(c){function d(a){a.pageX===b&&(a.pageX=a.originalEvent.pageX,a.pageY=a.originalEvent.pageY);a=c.cell(a.pageX,a.pageY);if(!a!=!g||a&&(a.row!=g.row||a.col!=g.col))a?(h||(h=a),f(a,h,a.row-h.row,a.col-h.col)):f(a,h),g=a}var e,f,h,g;this.start=function(b,m,p){f=b;h=g=null;c.build();d(m);e=p||"mousemove";a(document).bind(e,d)};this.stop=
function(){a(document).unbind(e,d);return g}}function Ya(a){var c=this,d={},e={},f={};c.left=function(c){return e[c]=e[c]===b?(d[c]=d[c]||a(c)).position().left:e[c]};c.right=function(e){return f[e]=f[e]===b?c.left(e)+(d[e]=d[e]||a(e)).width():f[e]};c.clear=function(){d={};e={};f={}}}var ja={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{year:"yyyy",
month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{year:"MMMM",month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),
dayNamesShortest:"SMTWTFS".split(""),buttonText:{prev:"&nbsp;&#9668;&nbsp;",next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",year:"year",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*"},zb={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;",next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},
buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},S=a.fullCalendar={version:"1.5.1"},ka=S.views={};a.fn.fullCalendar=function(d){if("string"==typeof d){var e=Array.prototype.slice.call(arguments,1),f;this.each(function(){var c=a.data(this,"fullCalendar");c&&a.isFunction(c[d])&&(c=c[d].apply(c,e),f===b&&(f=c),"destroy"==d&&a.removeData(this,"fullCalendar"))});return f!==b?f:this}var h=d.eventSources||[];delete d.eventSources;d.events&&(h.push(d.events),delete d.events);d=a.extend(!0,
{},ja,d.isRTL||d.isRTL===b&&ja.isRTL?zb:{},d);this.each(function(b,e){var f=a(e),g=new c(f,d,h);f.data("fullCalendar",g);g.render()});return this};S.sourceNormalizers=[];S.sourceFetchers=[];var qb={dataType:"json",cache:!1},rb=1;S.addDays=h;S.cloneDate=p;S.parseDate=z;S.parseISO8601=F;S.parseTime=L;S.formatDate=D;S.formatDates=la;var ub="sun mon tue wed thu fri sat".split(" "),sb=36E5,tb={s:function(a){return a.getSeconds()},ss:function(a){return wa(a.getSeconds())},m:function(a){return a.getMinutes()},
mm:function(a){return wa(a.getMinutes())},h:function(a){return a.getHours()%12||12},hh:function(a){return wa(a.getHours()%12||12)},H:function(a){return a.getHours()},HH:function(a){return wa(a.getHours())},d:function(a){return a.getDate()},dd:function(a){return wa(a.getDate())},ddd:function(a,b){return b.dayNamesShort[a.getDay()]},e:function(a,b){return b.dayNamesShortest[a.getDay()]},dddd:function(a,b){return b.dayNames[a.getDay()]},M:function(a){return a.getMonth()+1},MM:function(a){return wa(a.getMonth()+
1)},MMM:function(a,b){return b.monthNamesShort[a.getMonth()]},MMMM:function(a,b){return b.monthNames[a.getMonth()]},yy:function(a){return(a.getFullYear()+"").substring(2)},yyyy:function(a){return a.getFullYear()},t:function(a){return 12>a.getHours()?"a":"p"},tt:function(a){return 12>a.getHours()?"am":"pm"},T:function(a){return 12>a.getHours()?"A":"P"},TT:function(a){return 12>a.getHours()?"AM":"PM"},u:function(a){return D(a,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(a){a=a.getDate();return 10<a&&20>
a?"th":["st","nd","rd"][a%10-1]||"th"}};S.applyAll=La;ka.year=function(a,b){var c=this;c.render=function(a,b){b&&(c.curYear=g(a,b));var h=p(a,!0);h.setFullYear(h.getFullYear(),0,1);var m=p(a);m.setFullYear(m.getFullYear(),11,31);var k=p(h),n=p(m),l=d("weekends")?0:1;c.title=f(h,d("titleFormat"));c.start=h;c.end=m;c.visStart=k;c.visEnd=n;e("4x3",6,l?5:7,!0)};vb.call(c,a,b,"year");var d=c.opt,e=c.renderYear,f=b.formatDate};ka.month=function(a,b){var c=this;c.render=function(a,b){b&&(k(a,b),a.setDate(1));
var g=p(a,!0);g.setDate(1);var m=k(p(g),1),n=p(g),l=p(m),q=d("firstDay"),r=d("weekends")?0:1;r&&(u(n),u(l,-1,!0));h(n,-((n.getDay()-Math.max(q,r)+7)%7));h(l,(7-l.getDay()+Math.max(q,r))%7);q=Math.round((l-n)/6048E5);"fixed"==d("weekMode")&&(h(l,7*(6-q)),q=6);c.title=f(g,d("titleFormat"));c.start=g;c.end=m;c.visStart=n;c.visEnd=l;e(6,q,r?5:7,!0)};$a.call(c,a,b,"month");var d=c.opt,e=c.renderBasic,f=b.formatDate};ka.basicWeek=function(a,b){var c=this;c.render=function(a,b){b&&h(a,7*b);var g=h(p(a),
-((a.getDay()-d("firstDay")+7)%7)),m=h(p(g),7),k=p(g),n=p(m),l=d("weekends");l||(u(k),u(n,-1,!0));c.title=f(k,h(p(n),-1),d("titleFormat"));c.start=g;c.end=m;c.visStart=k;c.visEnd=n;e(1,1,l?7:5,!1)};$a.call(c,a,b,"basicWeek");var d=c.opt,e=c.renderBasic,f=b.formatDates};ka.basicDay=function(a,b){var c=this;c.render=function(a,b){b&&(h(a,b),d("weekends")||u(a,0>b?-1:1));c.title=f(a,d("titleFormat"));c.start=c.visStart=p(a,!0);c.end=c.visEnd=h(p(c.start),1);e(1,1,1,!1)};$a.call(c,a,b,"basicDay");var d=
c.opt,e=c.renderBasic,f=b.formatDate};e({weekMode:"fixed"});ka.agendaWeek=function(a,b){var c=this;c.render=function(a,b){b&&h(a,7*b);var g=h(p(a),-((a.getDay()-d("firstDay")+7)%7)),m=h(p(g),7),k=p(g),n=p(m),l=d("weekends");l||(u(k),u(n,-1,!0));c.title=f(k,h(p(n),-1),d("titleFormat"));c.start=g;c.end=m;c.visStart=k;c.visEnd=n;e(l?7:5)};mb.call(c,a,b,"agendaWeek");var d=c.opt,e=c.renderAgenda,f=b.formatDates};ka.agendaDay=function(a,b){var c=this;c.render=function(a,b){b&&(h(a,b),d("weekends")||u(a,
0>b?-1:1));var g=p(a,!0),m=h(p(g),1);c.title=f(a,d("titleFormat"));c.start=c.visStart=g;c.end=c.visEnd=m;e(1)};mb.call(c,a,b,"agendaDay");var d=c.opt,e=c.renderAgenda,f=b.formatDate};e({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24})})(jQuery);
(function(a){function b(a,b,c){var d=b;10>b&&(d="0"+b);if(c.isoTime)return b=a,10>b&&(b="0"+a),b+":"+d;b=a%12;0==b&&(b=12);return b+":"+d+(c.meridiemUpperCase?12>a?"AM":"PM":12>a?"am":"pm")}function e(a){if((a=a=/(\d+)\s*[:\-\.,]\s*(\d+)\s*(am|pm)?/i.exec(a))&&3<=a.length){var b=Number(a[1]),c=Number(a[2]);12==b&&a[3]&&(b-=12);a[3]&&"pm"==a[3].toLowerCase()&&(b+=12);return{hour:b,minute:c}}return null}function c(a){return a&&60*a.hour+a.minute}function d(d,g){for(var k=c(g.minTime),h=c(g.maxTime),
l=c(g.defaultTime),m=g.selection&&c(e(g.selection)),q=g.minutes,p=g.onehour,n=g.hours,m=m&&Math.floor((m-k)/g.timeInterval)*g.timeInterval+k,u,r=a("<ul></ul>"),C=k;C<=h;C+=g.timeInterval)(function(c){var d=b(Math.floor(c/60),c%60,g),e=d;if(g.showDuration)var f=c-k,e=60>f?e+(" ("+f+" "+q+")"):60==f?e+(" ("+p+")"):e+(" ("+Math.round(f/60*10)/10+" "+n+")");e=a("<li></li>").append(a('<a href="javascript:void(0);">'+e+"</a>").click(function(){g&&g.selectTime&&g.selectTime(d);return!1}).mousemove(function(){a("li.selected",
r).removeClass("selected")}).hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")})).appendTo(r);u||c!=l||(u=e);m==c&&(e.addClass("selected").addClass("ui-state-highlight"),u=e)})(C);u&&setTimeout(function(){d[0].scrollTop=u[0].offsetTop-2*u.height()},0);d.empty().append(r)}a.fn.calendricalTime=function(b){b=b||{};b.timeInterval=b.timeInterval||30;b.padding=b.padding||4;return this.each(function(){var c=a(this),k,h=!1;c.bind("focus click",function(){if(!k){var l=
c.position();k=a("<div></div>").addClass("calendricalTimePopup ui-widget ui-widget-content").mouseenter(function(){h=!0}).mouseleave(function(){h=!1}).mousedown(function(a){a.preventDefault()}).css({position:"absolute",left:l.left,top:l.top+c.height()+2*b.padding});c.after(k);l={selection:c.val(),selectTime:function(a){h=!1;c.val(a);k.remove();k=null},isoTime:b.isoTime||!1,meridiemUpperCase:b.meridiemUpperCase||!1,defaultTime:b.defaultTime||{hour:8,minute:0},minTime:b.minTime||{hour:0,minute:0},maxTime:b.maxTime||
{hour:23,minute:59},timeInterval:b.timeInterval||30,minutes:b.minutes||"mins",onehour:b.onehour||"1 hr",hours:b.hours||"hrs"};if(b.startTime){var m=e(b.startTime.val());b.startDate&&b.endDate&&!areDatesEqual(parseDate(b.startDate.val()),parseDate(b.endDate.val()))&&(m=null);m&&(l.minTime=m,l.showDuration=!0,k.addClass("calendricalEndTimePopup"))}d(k,l)}}).blur(function(){h?k&&c.focus():k&&(k.remove(),k=null)})})};a.fn.calendricalTimeRange=function(b){2<=this.length&&(a(this[0]).calendricalTime(b),
a(this[1]).calendricalTime(a.extend({startTime:a(this[0])},b)));return this}})(jQuery);
(function(a){function b(){this.regional=[];this.regional[""]={currentText:"Now",closeText:"Done",ampm:!1,timeFormat:"hh:mm tt",timeOnlyTitle:"Choose Time",timeText:"Time",hourText:"Hour",minuteText:"Minute",secondText:"Second",timezoneText:"Time Zone"};this._defaults={showButtonPanel:!0,timeOnly:!1,showHour:!0,showMinute:!0,showSecond:!1,showTimezone:!1,showTime:!0,stepHour:.05,stepMinute:.05,stepSecond:.05,hour:0,minute:0,second:0,timezone:"+0000",hourMin:0,minuteMin:0,secondMin:0,hourMax:23,minuteMax:59,
secondMax:59,minDateTime:null,maxDateTime:null,hourGrid:0,minuteGrid:0,secondGrid:0,alwaysSetTime:!0,separator:" ",altFieldTimeOnly:!0,showTimepicker:!0,timezoneList:"-1100 -1000 -0900 -0800 -0700 -0600 -0500 -0400 -0300 -0200 -0100 +0000 +0100 +0200 +0300 +0400 +0500 +0600 +0700 +0800 +0900 +1000 +1100 +1200".split(" ")};a.extend(this._defaults,this.regional[""])}a.extend(a.ui,{timepicker:{version:"0.9.4"}});a.extend(b.prototype,{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,
minute_slider:null,second_slider:null,timezone_select:null,hour:0,minute:0,second:0,timezone:"+0000",hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,ampm:"",formattedDate:"",formattedTime:"",formattedDateTime:"",timezoneList:"-1100 -1000 -0900 -0800 -0700 -0600 -0500 -0400 -0300 -0200 -0100 +0000 +0100 +0200 +0300 +0400 +0500 +0600 +0700 +0800 +0900 +1000 +1100 +1200".split(" "),setDefaults:function(b){var c=this._defaults;
b=b||{};a.extend(c,b);for(var d in b)if(null===b[d]||void 0===b[d])c[d]=b[d];return this},_newInst:function(e,c){var d=new b,f={},g;for(g in this._defaults){var k=e.attr("time:"+g);if(k)try{f[g]=eval(k)}catch(h){f[g]=k}}d._defaults=a.extend({},this._defaults,f,c,{beforeShow:function(b,e){a.isFunction(c.beforeShow)&&c.beforeShow(b,e,d)},onChangeMonthYear:function(b,f,g){d._updateDateTime(g);a.isFunction(c.onChangeMonthYear)&&c.onChangeMonthYear.call(e[0],b,f,g,d)},onClose:function(b,f){!0===d.timeDefined&&
""!=e.val()&&d._updateDateTime(f);a.isFunction(c.onClose)&&c.onClose.call(e[0],b,f,d)},timepicker:d});d.hour=d._defaults.hour;d.minute=d._defaults.minute;d.second=d._defaults.second;d.ampm="";d.$input=e;c.altField&&(d.$altInput=a(c.altField).css({cursor:"pointer"}).focus(function(){e.trigger("focus")}));void 0!==d._defaults.minDate&&d._defaults.minDate instanceof Date&&(d._defaults.minDateTime=new Date(d._defaults.minDate.getTime()));void 0!==d._defaults.minDateTime&&d._defaults.minDateTime instanceof
Date&&(d._defaults.minDate=new Date(d._defaults.minDateTime.getTime()));void 0!==d._defaults.maxDate&&d._defaults.maxDate instanceof Date&&(d._defaults.maxDateTime=new Date(d._defaults.maxDate.getTime()));void 0!==d._defaults.maxDateTime&&d._defaults.maxDateTime instanceof Date&&(d._defaults.maxDate=new Date(d._defaults.maxDateTime.getTime()));return d},_addTimePicker:function(a){var b=this.$altInput&&this._defaults.altFieldTimeOnly?this.$input.val()+" "+this.$altInput.val():this.$input.val();this.timeDefined=
this._parseTime(b);this._limitMinMaxDateTime(a,!1);this._injectTimePicker()},_parseTime:function(b,c){var d=this._defaults.timeFormat.toString().replace(/h{1,2}/ig,"(\\d?\\d)").replace(/m{1,2}/ig,"(\\d?\\d)").replace(/s{1,2}/ig,"(\\d?\\d)").replace(/t{1,2}/ig,"(am|pm|a|p)?").replace(/z{1}/ig,"((\\+|-)\\d\\d\\d\\d)?").replace(/\s/g,"\\s?")+"$",f=this._getFormatPositions();this.inst||(this.inst=a.datepicker._getInst(this.$input[0]));if(c||!this._defaults.timeOnly)d=".{"+a.datepicker._get(this.inst,
"dateFormat").length+",}"+this._defaults.separator.replace(RegExp("[.*+?|()\\[\\]{}\\\\]","g"),"\\$&")+d;return(d=b.match(new RegExp(d,"i")))?(-1!==f.t&&(this.ampm=(void 0===d[f.t]||0===d[f.t].length?"":"A"==d[f.t].charAt(0).toUpperCase()?"AM":"PM").toUpperCase()),-1!==f.h&&(this.hour="AM"==this.ampm&&"12"==d[f.h]?0:"PM"==this.ampm&&"12"!=d[f.h]?(parseFloat(d[f.h])+12).toFixed(0):Number(d[f.h])),-1!==f.m&&(this.minute=Number(d[f.m])),-1!==f.s&&(this.second=Number(d[f.s])),-1!==f.z&&(this.timezone=
d[f.z]),!0):!1},_getFormatPositions:function(){var a=this._defaults.timeFormat.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|t{1,2}|z)/g),b={h:-1,m:-1,s:-1,t:-1,z:-1};if(a)for(var d=0;d<a.length;d++)-1==b[a[d].toString().charAt(0)]&&(b[a[d].toString().charAt(0)]=d+1);return b},_injectTimePicker:function(){var b=this.inst.dpDiv,c=this._defaults,d=this,f=(c.hourMax-c.hourMax%c.stepHour).toFixed(0),g=(c.minuteMax-c.minuteMax%c.stepMinute).toFixed(0),k=(c.secondMax-c.secondMax%c.stepSecond).toFixed(0),h=
this.inst.id.toString().replace(/([^A-Za-z0-9_])/g,"");if(0===b.find("div#ui-timepicker-div-"+h).length&&c.showTimepicker){var l='<div class="ui-timepicker-div" id="ui-timepicker-div-'+h+'"><dl><dt class="ui_tpicker_time_label" id="ui_tpicker_time_label_'+h+'"'+(c.showTime?"":' style="display:none;"')+">"+c.timeText+'</dt><dd class="ui_tpicker_time" id="ui_tpicker_time_'+h+'"'+(c.showTime?"":' style="display:none;"')+'></dd><dt class="ui_tpicker_hour_label" id="ui_tpicker_hour_label_'+h+'"'+(c.showHour?
"":' style="display:none;"')+">"+c.hourText+"</dt>",m=0,q=0,p=0,n;if(c.showHour&&0<c.hourGrid){for(var l=l+('<dd class="ui_tpicker_hour"><div id="ui_tpicker_hour_'+h+'"'+(c.showHour?"":' style="display:none;"')+'></div><div style="padding-left: 1px"><table><tr>'),u=c.hourMin;u<f;u+=c.hourGrid){m++;var r=c.ampm&&12<u?u-12:u;10>r&&(r="0"+r);c.ampm&&(r=0==u?"12a":12>u?r+"a":r+"p");l+="<td>"+r+"</td>"}l+="</tr></table></div></dd>"}else l+='<dd class="ui_tpicker_hour" id="ui_tpicker_hour_'+h+'"'+(c.showHour?
"":' style="display:none;"')+"></dd>";l+='<dt class="ui_tpicker_minute_label" id="ui_tpicker_minute_label_'+h+'"'+(c.showMinute?"":' style="display:none;"')+">"+c.minuteText+"</dt>";if(c.showMinute&&0<c.minuteGrid){l+='<dd class="ui_tpicker_minute ui_tpicker_minute_'+c.minuteGrid+'"><div id="ui_tpicker_minute_'+h+'"'+(c.showMinute?"":' style="display:none;"')+'></div><div style="padding-left: 1px"><table><tr>';for(u=c.minuteMin;u<g;u+=c.minuteGrid)q++,l+="<td>"+(10>u?"0":"")+u+"</td>";l+="</tr></table></div></dd>"}else l+=
'<dd class="ui_tpicker_minute" id="ui_tpicker_minute_'+h+'"'+(c.showMinute?"":' style="display:none;"')+"></dd>";l+='<dt class="ui_tpicker_second_label" id="ui_tpicker_second_label_'+h+'"'+(c.showSecond?"":' style="display:none;"')+">"+c.secondText+"</dt>";if(c.showSecond&&0<c.secondGrid){l+='<dd class="ui_tpicker_second ui_tpicker_second_'+c.secondGrid+'"><div id="ui_tpicker_second_'+h+'"'+(c.showSecond?"":' style="display:none;"')+'></div><div style="padding-left: 1px"><table><tr>';for(u=c.secondMin;u<
k;u+=c.secondGrid)p++,l+="<td>"+(10>u?"0":"")+u+"</td>";l+="</tr></table></div></dd>"}else l+='<dd class="ui_tpicker_second" id="ui_tpicker_second_'+h+'"'+(c.showSecond?"":' style="display:none;"')+"></dd>";l+='<dt class="ui_tpicker_timezone_label" id="ui_tpicker_timezone_label_'+h+'"'+(c.showTimezone?"":' style="display:none;"')+">"+c.timezoneText+"</dt>";l+='<dd class="ui_tpicker_timezone" id="ui_tpicker_timezone_'+h+'"'+(c.showTimezone?"":' style="display:none;"')+"></dd>";$tp=a(l+"</dl></div>");
!0===c.timeOnly&&($tp.prepend('<div class="ui-widget-header ui-helper-clearfix ui-corner-all"><div class="ui-datepicker-title">'+c.timeOnlyTitle+"</div></div>"),b.find(".ui-datepicker-header, .ui-datepicker-calendar").hide());this.hour_slider=$tp.find("#ui_tpicker_hour_"+h).slider({orientation:"horizontal",value:this.hour,min:c.hourMin,max:f,step:c.stepHour,slide:function(a,b){d.hour_slider.slider("option","value",b.value);d._onTimeChange()}});this.minute_slider=$tp.find("#ui_tpicker_minute_"+h).slider({orientation:"horizontal",
value:this.minute,min:c.minuteMin,max:g,step:c.stepMinute,slide:function(a,b){d.minute_slider.slider("option","value",b.value);d._onTimeChange()}});this.second_slider=$tp.find("#ui_tpicker_second_"+h).slider({orientation:"horizontal",value:this.second,min:c.secondMin,max:k,step:c.stepSecond,slide:function(a,b){d.second_slider.slider("option","value",b.value);d._onTimeChange()}});this.timezone_select=$tp.find("#ui_tpicker_timezone_"+h).append("<select></select>").find("select");a.fn.append.apply(this.timezone_select,
a.map(c.timezoneList,function(b,c){return a("<option />").val("object"==typeof b?b.value:b).text("object"==typeof b?b.label:b)}));this.timezone_select.val("undefined"!=typeof this.timezone&&null!=this.timezone&&""!=this.timezone?this.timezone:c.timezone);this.timezone_select.change(function(){d._onTimeChange()});c.showHour&&0<c.hourGrid&&(n=100*m*c.hourGrid/(f-c.hourMin),$tp.find(".ui_tpicker_hour table").css({width:n+"%",marginLeft:n/(-2*m)+"%",borderCollapse:"collapse"}).find("td").each(function(b){a(this).click(function(){var b=
a(this).html();if(c.ampm)var e=b.substring(2).toLowerCase(),b=parseInt(b.substring(0,2)),b="a"==e?12==b?0:b:12==b?12:b+12;d.hour_slider.slider("option","value",b);d._onTimeChange();d._onSelectHandler()}).css({cursor:"pointer",width:100/m+"%",textAlign:"center",overflow:"hidden"})}));c.showMinute&&0<c.minuteGrid&&(n=100*q*c.minuteGrid/(g-c.minuteMin),$tp.find(".ui_tpicker_minute table").css({width:n+"%",marginLeft:n/(-2*q)+"%",borderCollapse:"collapse"}).find("td").each(function(b){a(this).click(function(){d.minute_slider.slider("option",
"value",a(this).html());d._onTimeChange();d._onSelectHandler()}).css({cursor:"pointer",width:100/q+"%",textAlign:"center",overflow:"hidden"})}));c.showSecond&&0<c.secondGrid&&$tp.find(".ui_tpicker_second table").css({width:n+"%",marginLeft:n/(-2*p)+"%",borderCollapse:"collapse"}).find("td").each(function(b){a(this).click(function(){d.second_slider.slider("option","value",a(this).html());d._onTimeChange();d._onSelectHandler()}).css({cursor:"pointer",width:100/p+"%",textAlign:"center",overflow:"hidden"})});
f=b.find(".ui-datepicker-buttonpane");f.length?f.before($tp):b.append($tp);this.$timeObj=$tp.find("#ui_tpicker_time_"+h);null!==this.inst&&(b=this.timeDefined,this._onTimeChange(),this.timeDefined=b);b=function(){d._onSelectHandler()};this.hour_slider.bind("slidestop",b);this.minute_slider.bind("slidestop",b);this.second_slider.bind("slidestop",b)}},_limitMinMaxDateTime:function(a,b){var d=this._defaults,f=new Date(a.selectedYear,a.selectedMonth,a.selectedDay);if(this._defaults.showTimepicker){if(null!==
this._defaults.minDateTime&&f){var g=this._defaults.minDateTime,k=new Date(g.getFullYear(),g.getMonth(),g.getDate(),0,0,0,0);if(null===this.hourMinOriginal||null===this.minuteMinOriginal||null===this.secondMinOriginal)this.hourMinOriginal=d.hourMin,this.minuteMinOriginal=d.minuteMin,this.secondMinOriginal=d.secondMin;a.settings.timeOnly||k.getTime()==f.getTime()?(this._defaults.hourMin=g.getHours(),this.hour<=this._defaults.hourMin?(this.hour=this._defaults.hourMin,this._defaults.minuteMin=g.getMinutes(),
this.minute<=this._defaults.minuteMin?(this.minute=this._defaults.minuteMin,this._defaults.secondMin=g.getSeconds()):(this.second<this._defaults.secondMin&&(this.second=this._defaults.secondMin),this._defaults.secondMin=this.secondMinOriginal)):(this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal)):(this._defaults.hourMin=this.hourMinOriginal,this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal)}if(null!==this._defaults.maxDateTime&&
f){g=this._defaults.maxDateTime;k=new Date(g.getFullYear(),g.getMonth(),g.getDate(),0,0,0,0);if(null===this.hourMaxOriginal||null===this.minuteMaxOriginal||null===this.secondMaxOriginal)this.hourMaxOriginal=d.hourMax,this.minuteMaxOriginal=d.minuteMax,this.secondMaxOriginal=d.secondMax;a.settings.timeOnly||k.getTime()==f.getTime()?(this._defaults.hourMax=g.getHours(),this.hour>=this._defaults.hourMax?(this.hour=this._defaults.hourMax,this._defaults.minuteMax=g.getMinutes(),this.minute>=this._defaults.minuteMax?
(this.minute=this._defaults.minuteMax,this._defaults.secondMin=g.getSeconds()):(this.second>this._defaults.secondMax&&(this.second=this._defaults.secondMax),this._defaults.secondMax=this.secondMaxOriginal)):(this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal)):(this._defaults.hourMax=this.hourMaxOriginal,this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal)}void 0!==b&&!0===b&&(this.hour_slider.slider("option",
{min:this._defaults.hourMin,max:this._defaults.hourMax}).slider("value",this.hour),this.minute_slider.slider("option",{min:this._defaults.minuteMin,max:this._defaults.minuteMax}).slider("value",this.minute),this.second_slider.slider("option",{min:this._defaults.secondMin,max:this._defaults.secondMax}).slider("value",this.second))}},_onTimeChange:function(){var a=this.hour_slider?this.hour_slider.slider("value"):!1,b=this.minute_slider?this.minute_slider.slider("value"):!1,d=this.second_slider?this.second_slider.slider("value"):
!1,f=this.timezone_select?this.timezone_select.val():!1;!1!==a&&(a=parseInt(a,10));!1!==b&&(b=parseInt(b,10));!1!==d&&(d=parseInt(d,10));var g=12>a?"AM":"PM",k=a!=this.hour||b!=this.minute||d!=this.second||0<this.ampm.length&&this.ampm!=g||f!=this.timezone;k&&(!1!==a&&(this.hour=a),!1!==b&&(this.minute=b),!1!==d&&(this.second=d),!1!==f&&(this.timezone=f),this._limitMinMaxDateTime(this.inst,!0));this._defaults.ampm&&(this.ampm=g);this._formatTime();this.$timeObj&&this.$timeObj.text(this.formattedTime);
this.timeDefined=!0;k&&this._updateDateTime()},_onSelectHandler:function(){var a=this._defaults.onSelect,b=this.$input?this.$input[0]:null;a&&b&&a.apply(b,[this.formattedDateTime,this])},_formatTime:function(b,c,d){void 0==d&&(d=this._defaults.ampm);b=b||{hour:this.hour,minute:this.minute,second:this.second,ampm:this.ampm,timezone:this.timezone};var f=c||this._defaults.timeFormat.toString();if(d)var g="AM"==b.ampm?b.hour:b.hour%12,g=0===Number(g)?12:g,f=f.toString().replace(/hh/g,(10>g?"0":"")+g).replace(/h/g,
g).replace(/mm/g,(10>b.minute?"0":"")+b.minute).replace(/m/g,b.minute).replace(/ss/g,(10>b.second?"0":"")+b.second).replace(/s/g,b.second).replace(/TT/g,b.ampm.toUpperCase()).replace(/tt/g,b.ampm.toLowerCase()).replace(/T/g,b.ampm.charAt(0).toUpperCase()).replace(/t/g,b.ampm.charAt(0).toLowerCase()).replace(/z/g,b.timezone);else f=f.toString().replace(/hh/g,(10>b.hour?"0":"")+b.hour).replace(/h/g,b.hour).replace(/mm/g,(10>b.minute?"0":"")+b.minute).replace(/m/g,b.minute).replace(/ss/g,(10>b.second?
"0":"")+b.second).replace(/s/g,b.second).replace(/z/g,b.timezone),f=a.trim(f.replace(/t/gi,""));if(arguments.length)return f;this.formattedTime=f},_updateDateTime:function(b){b=this.inst||b;dt=new Date(b.selectedYear,b.selectedMonth,b.selectedDay);dateFmt=a.datepicker._get(b,"dateFormat");formatCfg=a.datepicker._getFormatConfig(b);timeAvailable=null!==dt&&this.timeDefined;var c=this.formattedDate=a.datepicker.formatDate(dateFmt,null===dt?new Date:dt,formatCfg);void 0!==b.lastVal&&0<b.lastVal.length&&
0===this.$input.val().length||(!0===this._defaults.timeOnly?c=this.formattedTime:!0!==this._defaults.timeOnly&&(this._defaults.alwaysSetTime||timeAvailable)&&(c+=this._defaults.separator+this.formattedTime),this.formattedDateTime=c,this._defaults.showTimepicker?this.$altInput&&!0===this._defaults.altFieldTimeOnly?(this.$altInput.val(this.formattedTime),this.$input.val(this.formattedDate)):(this.$altInput&&this.$altInput.val(c),this.$input.val(c)):this.$input.val(this.formattedDate),this.$input.trigger("change"))}});
a.fn.extend({timepicker:function(b){b=b||{};var c=arguments;"object"==typeof b&&(c[0]=a.extend(b,{timeOnly:!0}));return a(this).each(function(){a.fn.datetimepicker.apply(a(this),c)})},datetimepicker:function(b){b=b||{};var c=arguments;return"string"==typeof b?"getDate"==b?a.fn.datepicker.apply(a(this[0]),c):this.each(function(){var b=a(this);b.datepicker.apply(b,c)}):this.each(function(){var c=a(this);c.datepicker(a.timepicker._newInst(c,b)._defaults)})}});a.datepicker._base_selectDate=a.datepicker._selectDate;
a.datepicker._selectDate=function(b,c){var d=this._getInst(a(b)[0]),f=this._get(d,"timepicker");f?(f._limitMinMaxDateTime(d,!0),d.inline=d.stay_open=!0,this._base_selectDate(b,c+f._defaults.separator+f.formattedTime),d.inline=d.stay_open=!1,this._notifyChange(d),this._updateDatepicker(d)):this._base_selectDate(b,c)};a.datepicker._base_updateDatepicker=a.datepicker._updateDatepicker;a.datepicker._updateDatepicker=function(a){if("boolean"!==typeof a.stay_open||!1===a.stay_open){this._base_updateDatepicker(a);
var b=this._get(a,"timepicker");b&&b._addTimePicker(a)}};a.datepicker._base_doKeyPress=a.datepicker._doKeyPress;a.datepicker._doKeyPress=function(b){var c=a.datepicker._getInst(b.target),d=a.datepicker._get(c,"timepicker");if(d&&a.datepicker._get(c,"constrainInput")){var f=d._defaults.ampm,c=d._defaults.timeFormat.toString().replace(/[hms]/g,"").replace(/TT/g,f?"APM":"").replace(/T/g,f?"AP":"").replace(/tt/g,f?"apm":"").replace(/t/g,f?"ap":"")+" "+d._defaults.separator+a.datepicker._possibleChars(a.datepicker._get(c,
"dateFormat")),d=String.fromCharCode(void 0===b.charCode?b.keyCode:b.charCode);return b.ctrlKey||" ">d||!c||-1<c.indexOf(d)}return a.datepicker._base_doKeyPress(b)};a.datepicker._base_doKeyUp=a.datepicker._doKeyUp;a.datepicker._doKeyUp=function(b){var c=a.datepicker._getInst(b.target),d=a.datepicker._get(c,"timepicker");if(d&&d._defaults.timeOnly&&c.input.val()!=c.lastVal)try{a.datepicker._updateDatepicker(c)}catch(f){a.datepicker.log(f)}return a.datepicker._base_doKeyUp(b)};a.datepicker._base_gotoToday=
a.datepicker._gotoToday;a.datepicker._gotoToday=function(b){this._base_gotoToday(b);this._setTime(this._getInst(a(b)[0]),new Date)};a.datepicker._disableTimepickerDatepicker=function(b,c,d){c=this._getInst(b);d=this._get(c,"timepicker");a(b).datepicker("getDate");d&&(d._defaults.showTimepicker=!1,d._updateDateTime(c))};a.datepicker._enableTimepickerDatepicker=function(b,c,d){c=this._getInst(b);d=this._get(c,"timepicker");a(b).datepicker("getDate");d&&(d._defaults.showTimepicker=!0,d._addTimePicker(c),
d._updateDateTime(c))};a.datepicker._setTime=function(a,b){var d=this._get(a,"timepicker");if(d){var f=d._defaults,g=b?b.getHours():f.hour,k=b?b.getMinutes():f.minute,h=b?b.getSeconds():f.second;if(g<f.hourMin||g>f.hourMax||k<f.minuteMin||k>f.minuteMax||h<f.secondMin||h>f.secondMax)g=f.hourMin,k=f.minuteMin,h=f.secondMin;d.hour_slider?d.hour_slider.slider("value",g):d.hour=g;d.minute_slider?d.minute_slider.slider("value",k):d.minute=k;d.second_slider?d.second_slider.slider("value",h):d.second=h;d._onTimeChange();
d._updateDateTime(a)}};a.datepicker._setTimeDatepicker=function(a,b,d){a=this._getInst(a);var f=this._get(a,"timepicker");f&&(this._setDateFromField(a),b&&("string"==typeof b?(f._parseTime(b,d),b=new Date,b.setHours(f.hour,f.minute,f.second)):b=new Date(b.getTime()),"Invalid Date"==b.toString()&&(b=void 0),this._setTime(a,b)))};a.datepicker._base_setDateDatepicker=a.datepicker._setDateDatepicker;a.datepicker._setDateDatepicker=function(a,b){var d=this._getInst(a),f=b instanceof Date?new Date(b.getTime()):
b;this._updateDatepicker(d);this._base_setDateDatepicker.apply(this,arguments);this._setTimeDatepicker(a,f,!0)};a.datepicker._base_getDateDatepicker=a.datepicker._getDateDatepicker;a.datepicker._getDateDatepicker=function(b,c){var d=this._getInst(b),f=this._get(d,"timepicker");return f?(this._setDateFromField(d,c),(d=this._getDate(d))&&f._parseTime(a(b).val(),!0)&&d.setHours(f.hour,f.minute,f.second),d):this._base_getDateDatepicker(b,c)};a.timepicker=new b;a.timepicker.version="0.9.4"})(jQuery);
(function(a){a(document.body).is("[role]")||a(document.body).attr("role","application");var b=0;a.widget("ui.tooltip",{options:{tooltipClass:"ui-widget-content",content:function(){return a(this).attr("title")},position:{my:"left center",at:"right center",offset:"15 0"}},_init:function(){var e=this;this.tooltip=a("<div></div>").attr("id","ui-tooltip-"+b++).attr("role","tooltip").attr("aria-hidden","true").addClass("ui-tooltip ui-widget ui-corner-all").addClass(this.options.tooltipClass).appendTo(document.body).hide();
this.tooltipContent=a("<div></div>").addClass("ui-tooltip-content").appendTo(this.tooltip);this.opacity=this.tooltip.css("opacity");this.element.bind("focus.tooltip mouseenter.tooltip",function(a){e.open(a)}).bind("blur.tooltip mouseleave.tooltip",function(a){e.close(a)})},enable:function(){this.options.disabled=!1},disable:function(){this.options.disabled=!0},destroy:function(){this.tooltip.remove();a.Widget.prototype.destroy.apply(this,arguments)},widget:function(){return this.tooltip},open:function(a){var b=
this.element;if(!this.current||this.current[0]!=b[0]){var d=this;this.current=b;this.currentTitle=b.attr("title");var f=this.options.content.call(b[0],function(f){d.current==b&&d._show(a,b,f)});f&&d._show(a,b,f)}},_show:function(b,c,d){d&&(c.attr("title",""),this.options.disabled||(this.tooltipContent.html(d),this.tooltip.css({top:0,left:0}).show().position(a.extend(this.options.position,{of:c})).hide(),this.tooltip.attr("aria-hidden","false"),c.attr("aria-describedby",this.tooltip.attr("id")),this.tooltip.is(":animated")?
this.tooltip.stop().show().fadeTo("normal",this.opacity):this.tooltip.is(":visible")?this.tooltip.fadeTo("normal",this.opacity):this.tooltip.fadeIn(),this._trigger("open",b)))},close:function(b){this.current&&(this.current.attr("title",this.currentTitle),this.options.disabled||(this.current.removeAttr("aria-describedby"),this.current=null,this.tooltip.attr("aria-hidden","true"),this.tooltip.is(":animated")?this.tooltip.stop().fadeTo("normal",0,function(){a(this).hide().css("opacity","")}):this.tooltip.stop().fadeOut(),
this._trigger("close",b)))}})})(jQuery);
(function(a){a.jgrid=a.jgrid||{};a.extend(a.jgrid,{guid:1,uidPref:"jqg",randId:function(b){return(b?b:a.jgrid.uidPref)+a.jgrid.guid++}});a.extend(a.jgrid,{showModal:function(a){a.w.show()},closeModal:function(a){a.w.hide().attr("aria-hidden","true");a.o&&a.o.remove()},hideModal:function(b,e){e=a.extend({jqm:!0,gb:""},e||{});if(e.onClose){var c=e.onClose(b);if("boolean"==typeof c&&!c)return}if(a.fn.jqm&&!0===e.jqm)a(b).attr("aria-hidden","true").jqmHide();else{if(""!==e.gb)try{a(".jqgrid-overlay:first",
e.gb).hide()}catch(d){}a(b).hide().attr("aria-hidden","true")}},findPos:function(a){var e=0,c=0;if(a.offsetParent){do e+=a.offsetLeft,c+=a.offsetTop;while(a=a.offsetParent)}return[e,c]},createModal:function(b,e,c,d,f,g,k){var h=document.createElement("div"),l,m=this;k=a.extend({},k||{});l="rtl"==a(c.gbox).attr("dir")?!0:!1;h.className="ui-widget ui-widget-content ui-corner-all ui-jqdialog";h.id=b.themodal;var q=document.createElement("div");q.className="ui-jqdialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix";
q.id=b.modalhead;a(q).append("<span class='ui-jqdialog-title'>"+c.caption+"</span>");var p=a("<a href='javascript:void(0)' class='ui-jqdialog-titlebar-close ui-corner-all'></a>").hover(function(){p.addClass("ui-state-hover")},function(){p.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-closethick'></span>");a(q).append(p);l?(h.dir="rtl",a(".ui-jqdialog-title",q).css("float","right"),a(".ui-jqdialog-titlebar-close",q).css("left","0.3em")):(h.dir="ltr",a(".ui-jqdialog-title",q).css("float",
"left"),a(".ui-jqdialog-titlebar-close",q).css("right","0.3em"));var n=document.createElement("div");a(n).addClass("ui-jqdialog-content ui-widget-content").attr("id",b.modalcontent);a(n).append(e);h.appendChild(n);a(h).prepend(q);!0===g?a("body").append(h):"string"==typeof g?a(g).append(h):a(h).insertBefore(d);a(h).css(k);"undefined"===typeof c.jqModal&&(c.jqModal=!0);e={};if(a.fn.jqm&&!0===c.jqModal)0===c.left&&0===c.top&&c.overlay&&(k=[],k=this.findPos(f),c.left=k[0]+4,c.top=k[1]+4),e.top=c.top+
"px",e.left=c.left;else if(0!==c.left||0!==c.top)e.left=c.left,e.top=c.top+"px";a("a.ui-jqdialog-titlebar-close",q).click(function(d){d=a("#"+b.themodal).data("onClose")||c.onClose;var e=a("#"+b.themodal).data("gbox")||c.gbox;m.hideModal("#"+b.themodal,{gb:e,jqm:c.jqModal,onClose:d});return!1});0!==c.width&&c.width||(c.width=300);0!==c.height&&c.height||(c.height=200);c.zIndex||(d=a(d).parents("*[role=dialog]").filter(":first").css("z-index"),c.zIndex=d?parseInt(d,10)+1:950);d=0;l&&e.left&&!g&&(d=
a(c.gbox).width()-(isNaN(c.width)?0:parseInt(c.width,10))-8,e.left=parseInt(e.left,10)+parseInt(d,10));e.left&&(e.left+="px");a(h).css(a.extend({width:isNaN(c.width)?"auto":c.width+"px",height:isNaN(c.height)?"auto":c.height+"px",zIndex:c.zIndex,overflow:"hidden"},e)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":b.modalhead,"aria-hidden":"true"});"undefined"==typeof c.drag&&(c.drag=!0);"undefined"==typeof c.resize&&(c.resize=!0);if(c.drag)if(a(q).css("cursor","move"),a.fn.jqDrag)a(h).jqDrag(q);
else try{a(h).draggable({handle:a("#"+q.id)})}catch(u){}if(c.resize)if(a.fn.jqResize)a(h).append("<div class='jqResize ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se ui-icon-grip-diagonal-se'></div>"),a("#"+b.themodal).jqResize(".jqResize",b.scrollelm?"#"+b.scrollelm:!1);else try{a(h).resizable({handles:"se, sw",alsoResize:b.scrollelm?"#"+b.scrollelm:!1})}catch(u){}!0===c.closeOnEscape&&a(h).keydown(function(d){27==d.which&&(d=a("#"+b.themodal).data("onClose")||c.onClose,
m.hideModal(this,{gb:c.gbox,jqm:c.jqModal,onClose:d}))})},viewModal:function(b,e){e=a.extend({toTop:!0,overlay:10,modal:!1,onShow:this.showModal,onHide:this.closeModal,gbox:"",jqm:!0,jqM:!0},e||{});if(a.fn.jqm&&!0===e.jqm)e.jqM?a(b).attr("aria-hidden","false").jqm(e).jqmShow():a(b).attr("aria-hidden","false").jqmShow();else{""!==e.gbox&&(a(".jqgrid-overlay:first",e.gbox).show(),a(b).data("gbox",e.gbox));a(b).show().attr("aria-hidden","false");try{a(":input:visible",b)[0].focus()}catch(c){}}},info_dialog:function(b,
e,c,d){var f={width:290,height:"auto",dataheight:"auto",drag:!0,resize:!1,caption:"<b>"+b+"</b>",left:250,top:170,zIndex:1E3,jqModal:!0,modal:!1,closeOnEscape:!0,align:"center",buttonalign:"center",buttons:[]};a.extend(f,d||{});var g=f.jqModal,k=this;a.fn.jqm&&!g&&(g=!1);b="";if(0<f.buttons.length)for(d=0;d<f.buttons.length;d++)"undefined"==typeof f.buttons[d].id&&(f.buttons[d].id="info_button_"+d),b+="<a href='javascript:void(0)' id='"+f.buttons[d].id+"' class='fm-button ui-state-default ui-corner-all'>"+
f.buttons[d].text+"</a>";d=isNaN(f.dataheight)?f.dataheight:f.dataheight+"px";e="<div id='info_id'>"+("<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+d+";"+("text-align:"+f.align+";")+"'>"+e+"</div>");e+=c?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+f.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a href='javascript:void(0)' id='closedialog' class='fm-button ui-state-default ui-corner-all'>"+
c+"</a>"+b+"</div>":""!==b?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+f.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+b+"</div>":"";e+="</div>";try{"false"==a("#info_dialog").attr("aria-hidden")&&this.hideModal("#info_dialog",{jqm:g}),a("#info_dialog").remove()}catch(h){}this.createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},e,f,"","",!0);b&&a.each(f.buttons,
function(b){a("#"+this.id,"#info_id").bind("click",function(){f.buttons[b].onClick.call(a("#info_dialog"));return!1})});a("#closedialog","#info_id").click(function(a){k.hideModal("#info_dialog",{jqm:g});return!1});a(".fm-button","#info_dialog").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});a.isFunction(f.beforeOpen)&&f.beforeOpen();this.viewModal("#info_dialog",{onHide:function(a){a.w.hide().remove();a.o&&a.o.remove()},modal:f.modal,jqm:g});
a.isFunction(f.afterOpen)&&f.afterOpen();try{a("#info_dialog").focus()}catch(h){}},createEl:function(b,e,c,d,f){function g(b,c){a.isFunction(c.dataInit)&&c.dataInit(b);c.dataEvents&&a.each(c.dataEvents,function(){void 0!==this.data?a(b).bind(this.type,this.data,this.fn):a(b).bind(this.type,this.fn)});return c}function k(b,c,d){var e="dataInit dataEvents dataUrl buildSelect sopt searchhidden defaultValue attr".split(" ");"undefined"!=typeof d&&a.isArray(d)&&(e=a.extend(e,d));a.each(c,function(c,d){-1===
a.inArray(c,e)&&a(b).attr(c,d)});c.hasOwnProperty("id")||a(b).attr("id",a.jgrid.randId())}var h="";switch(b){case "textarea":h=document.createElement("textarea");d?e.cols||a(h).css({width:"98%"}):e.cols||(e.cols=20);e.rows||(e.rows=2);if("&nbsp;"==c||"&#160;"==c||1==c.length&&160==c.charCodeAt(0))c="";h.value=c;k(h,e);e=g(h,e);a(h).attr({role:"textbox",multiline:"true"});break;case "checkbox":h=document.createElement("input");h.type="checkbox";e.value?(b=e.value.split(":"),c===b[0]&&(h.checked=!0,
h.defaultChecked=!0),h.value=b[0],a(h).attr("offval",b[1])):(b=c.toLowerCase(),0>b.search(/(false|0|no|off|undefined)/i)&&""!==b?(h.checked=!0,h.defaultChecked=!0,h.value=c):h.value="on",a(h).attr("offval","off"));k(h,e,["value"]);e=g(h,e);a(h).attr("role","checkbox");break;case "select":h=document.createElement("select");h.setAttribute("role","select");d=[];!0===e.multiple?(b=!0,h.multiple="multiple",a(h).attr("aria-multiselectable","true")):b=!1;if("undefined"!=typeof e.dataUrl)a.ajax(a.extend({url:e.dataUrl,
type:"GET",dataType:"html",context:{elem:h,options:e,vl:c},success:function(b,c){var d,e=[],f=this.elem,h=this.vl,m=a.extend({},this.options),l=!0===m.multiple;"undefined"!=typeof m.buildSelect?(d=m.buildSelect(b),d=a(d).html()):d=a(b).html();d&&(a(f).append(d),k(f,m),m=g(f,m),"undefined"===typeof m.size&&(m.size=l?3:1),l?(e=h.split(","),e=a.map(e,function(b){return a.trim(b)})):e[0]=a.trim(h),setTimeout(function(){a("option",f).each(function(b){a(this).attr("role","option");if(-1<a.inArray(a.trim(a(this).text()),
e)||-1<a.inArray(a.trim(a(this).val()),e))this.selected="selected"})},0))}},f||{}));else if(e.value){var l;b?(d=c.split(","),d=a.map(d,function(b){return a.trim(b)}),"undefined"===typeof e.size&&(e.size=3)):e.size=1;"function"===typeof e.value&&(e.value=e.value());var m,q;if("string"===typeof e.value)for(m=e.value.split(";"),l=0;l<m.length;l++)q=m[l].split(":"),2<q.length&&(q[1]=a.map(q,function(a,b){if(0<b)return a}).join(":")),f=document.createElement("option"),f.setAttribute("role","option"),f.value=
q[0],f.innerHTML=q[1],b||a.trim(q[0])!=a.trim(c)&&a.trim(q[1])!=a.trim(c)||(f.selected="selected"),b&&(-1<a.inArray(a.trim(q[1]),d)||-1<a.inArray(a.trim(q[0]),d))&&(f.selected="selected"),h.appendChild(f);else if("object"===typeof e.value)for(l in m=e.value,m)m.hasOwnProperty(l)&&(f=document.createElement("option"),f.setAttribute("role","option"),f.value=l,f.innerHTML=m[l],b||a.trim(l)!=a.trim(c)&&a.trim(m[l])!=a.trim(c)||(f.selected="selected"),b&&(-1<a.inArray(a.trim(m[l]),d)||-1<a.inArray(a.trim(l),
d))&&(f.selected="selected"),h.appendChild(f));k(h,e,["value"]);e=g(h,e)}break;case "text":case "password":case "button":l="button"==b?"button":"textbox";h=document.createElement("input");h.type=b;h.value=c;k(h,e);e=g(h,e);"button"!=b&&(d?e.size||a(h).css({width:"98%"}):e.size||(e.size=20));a(h).attr("role",l);break;case "image":case "file":h=document.createElement("input");h.type=b;k(h,e);e=g(h,e);break;case "custom":h=document.createElement("span");try{if(a.isFunction(e.custom_element))if(m=e.custom_element.call(this,
c,e))m=a(m).addClass("customelement").attr({id:e.id,name:e.name}),a(h).empty().append(m);else throw"e2";else throw"e1";}catch(p){"e1"==p&&this.info_dialog(a.jgrid.errors.errcap,"function 'custom_element' "+a.jgrid.edit.msg.nodefined,a.jgrid.edit.bClose),"e2"==p?this.info_dialog(a.jgrid.errors.errcap,"function 'custom_element' "+a.jgrid.edit.msg.novalue,a.jgrid.edit.bClose):this.info_dialog(a.jgrid.errors.errcap,"string"===typeof p?p:p.message,a.jgrid.edit.bClose)}}return h},checkDate:function(a,e){var c=
function(a){return 0!==a%4||0===a%100&&0!==a%400?28:29},d={},f;a=a.toLowerCase();f=-1!=a.indexOf("/")?"/":-1!=a.indexOf("-")?"-":-1!=a.indexOf(".")?".":"/";a=a.split(f);e=e.split(f);if(3!=e.length)return!1;f=-1;for(var g,k=-1,h=-1,l=0;l<a.length;l++)g=isNaN(e[l])?0:parseInt(e[l],10),d[a[l]]=g,g=a[l],-1!=g.indexOf("y")&&(f=l),-1!=g.indexOf("m")&&(h=l),-1!=g.indexOf("d")&&(k=l);g="y"==a[f]||"yyyy"==a[f]?4:"yy"==a[f]?2:-1;var l=function(a){for(var b=1;b<=a;b++){this[b]=31;if(4==b||6==b||9==b||11==b)this[b]=
30;2==b&&(this[b]=29)}return this}(12),m;if(-1===f)return!1;m=d[a[f]].toString();2==g&&1==m.length&&(g=1);if(m.length!=g||0===d[a[f]]&&"00"!=e[f]||-1===h)return!1;m=d[a[h]].toString();if(1>m.length||1>d[a[h]]||12<d[a[h]]||-1===k)return!1;m=d[a[k]].toString();return 1>m.length||1>d[a[k]]||31<d[a[k]]||2==d[a[h]]&&d[a[k]]>c(d[a[f]])||d[a[k]]>l[d[a[h]]]?!1:!0},isEmpty:function(a){return a.match(/^\s+$/)||""===a?!0:!1},checkTime:function(a){var e=/^(\d{1,2}):(\d{2})([ap]m)?$/;if(!this.isEmpty(a))if(a=
a.match(e)){if(a[3]){if(1>a[1]||12<a[1])return!1}else if(23<a[1])return!1;if(59<a[2])return!1}else return!1;return!0},checkValues:function(b,e,c,d,f){var g,k;if("undefined"===typeof d)if("string"==typeof e)for(d=0,f=c.p.colModel.length;d<f;d++){if(c.p.colModel[d].name==e){g=c.p.colModel[d].editrules;e=d;try{k=c.p.colModel[d].formoptions.label}catch(h){}break}}else 0<=e&&(g=c.p.colModel[e].editrules);else g=d,k=void 0===f?"_":f;if(g){k||(k=c.p.colNames[e]);if(!0===g.required&&this.isEmpty(b))return[!1,
k+": "+a.jgrid.edit.msg.required,""];d=!1===g.required?!1:!0;if(!0===g.number&&(!1!==d||!this.isEmpty(b))&&isNaN(b))return[!1,k+": "+a.jgrid.edit.msg.number,""];if("undefined"!=typeof g.minValue&&!isNaN(g.minValue)&&parseFloat(b)<parseFloat(g.minValue))return[!1,k+": "+a.jgrid.edit.msg.minValue+" "+g.minValue,""];if("undefined"!=typeof g.maxValue&&!isNaN(g.maxValue)&&parseFloat(b)>parseFloat(g.maxValue))return[!1,k+": "+a.jgrid.edit.msg.maxValue+" "+g.maxValue,""];if(!(!0!==g.email||!1===d&&this.isEmpty(b)||
(f=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,
f.test(b))))return[!1,k+": "+a.jgrid.edit.msg.email,""];if(!(!0!==g.integer||!1===d&&this.isEmpty(b)||!isNaN(b)&&0===b%1&&-1==b.indexOf(".")))return[!1,k+": "+a.jgrid.edit.msg.integer,""];if(!(!0!==g.date||!1===d&&this.isEmpty(b)||(e=c.p.colModel[e].formatoptions&&c.p.colModel[e].formatoptions.newformat?c.p.colModel[e].formatoptions.newformat:c.p.colModel[e].datefmt||"Y-m-d",this.checkDate(e,b))))return[!1,k+": "+a.jgrid.edit.msg.date+" - "+e,""];if(!0===g.time&&!(!1===d&&this.isEmpty(b)||this.checkTime(b)))return[!1,
k+": "+a.jgrid.edit.msg.date+" - hh:mm (am/pm)",""];if(!(!0!==g.url||!1===d&&this.isEmpty(b)||(f=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i,f.test(b))))return[!1,k+": "+a.jgrid.edit.msg.url,""];if(!0===g.custom&&(!1!==d||!this.isEmpty(b)))return a.isFunction(g.custom_func)?(b=g.custom_func.call(c,b,k),a.isArray(b)?b:[!1,a.jgrid.edit.msg.customarray,""]):[!1,a.jgrid.edit.msg.customfcheck,""]}return[!0,"",""]}})})(jQuery);
(function(a){a.fn.jqFilter=function(b){if("string"===typeof b){var e=a.fn.jqFilter[b];if(!e)throw"jqFilter - No such method: "+b;var c=a.makeArray(arguments).slice(1);return e.apply(this,c)}var d=a.extend(!0,{filter:null,columns:[],onChange:null,checkValues:null,error:!1,errmsg:"",errorcheck:!0,showQuery:!0,sopt:null,ops:[{name:"eq",description:"equal",operator:"="},{name:"ne",description:"not equal",operator:"<>"},{name:"lt",description:"less",operator:"<"},{name:"le",description:"less or equal",
operator:"<="},{name:"gt",description:"greater",operator:">"},{name:"ge",description:"greater or equal",operator:">="},{name:"bw",description:"begins with",operator:"LIKE"},{name:"bn",description:"does not begin with",operator:"NOT LIKE"},{name:"in",description:"in",operator:"IN"},{name:"ni",description:"not in",operator:"NOT IN"},{name:"ew",description:"ends with",operator:"LIKE"},{name:"en",description:"does not end with",operator:"NOT LIKE"},{name:"cn",description:"contains",operator:"LIKE"},{name:"nc",
description:"does not contain",operator:"NOT LIKE"},{name:"nu",description:"is null",operator:"IS NULL"},{name:"nn",description:"is not null",operator:"IS NOT NULL"}],numopts:"eq ne lt le gt ge nu nn in ni".split(" "),stropts:"eq ne bw bn ew en cn nc nu nn in ni".split(" "),_gridsopt:[],groupOps:["AND","OR"],groupButton:!0},b||{});return this.each(function(){if(!this.filter){this.p=d;if(null===this.p.filter||void 0===this.p.filter)this.p.filter={groupOp:this.p.groupOps[0],rules:[],groups:[]};var b,
c=this.p.columns.length,e,h=/msie/i.test(navigator.userAgent)&&!window.opera;if(this.p._gridsopt.length)for(b=0;b<this.p._gridsopt.length;b++)this.p.ops[b].description=this.p._gridsopt[b];this.p.initFilter=a.extend(!0,{},this.p.filter);if(c){for(b=0;b<c;b++)e=this.p.columns[b],e.stype?e.inputtype=e.stype:e.inputtype||(e.inputtype="text"),e.sorttype?e.searchtype=e.sorttype:e.searchtype||(e.searchtype="string"),void 0===e.hidden&&(e.hidden=!1),e.label||(e.label=e.name),e.index&&(e.name=e.index),e.hasOwnProperty("searchoptions")||
(e.searchoptions={}),e.hasOwnProperty("searchrules")||(e.searchrules={});this.p.showQuery&&a(this).append("<table class='queryresult ui-widget ui-widget-content' style='display:block;max-width:440px;border:0px none;'><tbody><tr><td class='query'></td></tr></tbody></table>");var l=function(b,c){var e=[!0,""];if(a.isFunction(c.searchrules))e=c.searchrules(b,c);else if(a.jgrid&&a.jgrid.checkValues)try{e=a.jgrid.checkValues(b,-1,null,c.searchrules,c.label)}catch(f){}e&&e.length&&!1===e[0]&&(d.error=!e[0],
d.errmsg=e[1])};this.onchange=function(){this.p.error=!1;this.p.errmsg="";return a.isFunction(this.p.onChange)?this.p.onChange.call(this,this.p):!1};this.reDraw=function(){a("table.group:first",this).remove();var b=this.createTableForGroup(d.filter,null);a(this).append(b)};this.createTableForGroup=function(b,c){var e=this,f,h=a("<table class='group ui-widget ui-widget-content' style='border:0px none;'><tbody></tbody></table>");null===c&&a(h).append("<tr class='error' style='display:none;'><th colspan='5' class='ui-state-error' align='left'></th></tr>");
var g=a("<tr></tr>");a(h).append(g);var k=a("<th colspan='5' align='left'></th>");g.append(k);var l=a("<select class='opsel'></select>");k.append(l);var g="",F;for(f=0;f<d.groupOps.length;f++)F=b.groupOp===e.p.groupOps[f]?" selected='selected'":"",g+="<option value='"+e.p.groupOps[f]+"'"+F+">"+e.p.groupOps[f]+"</option>";l.append(g).bind("change",function(){b.groupOp=a(l).val();e.onchange()});g="<span></span>";this.p.groupButton&&(g=a("<input type='button' value='+ {}' title='Add subgroup' class='add-group'/>"),
g.bind("click",function(){void 0===b.groups&&(b.groups=[]);b.groups.push({groupOp:d.groupOps[0],rules:[],groups:[]});e.reDraw();e.onchange();return!1}));k.append(g);var g=a("<input type='button' value='+' title='Add rule' class='add-rule ui-add'/>"),L;g.bind("click",function(){void 0===b.rules&&(b.rules=[]);for(f=0;f<e.p.columns.length;f++){var a="undefined"===typeof e.p.columns[f].search?!0:e.p.columns[f].search,c=!0===e.p.columns[f].hidden;if(!0===e.p.columns[f].searchoptions.searchhidden&&a||a&&
!c){L=e.p.columns[f];break}}b.rules.push({field:L.name,op:(L.searchoptions.sopt?L.searchoptions.sopt:e.p.sopt?e.p.sopt:"string"===L.searchtype?e.p.stropts:e.p.numopts)[0],data:""});e.reDraw();return!1});k.append(g);null!==c&&(g=a("<input type='button' value='-' title='Delete group' class='delete-group'/>"),k.append(g),g.bind("click",function(){for(f=0;f<c.groups.length;f++)if(c.groups[f]===b){c.groups.splice(f,1);break}e.reDraw();e.onchange();return!1}));if(void 0!==b.groups)for(f=0;f<b.groups.length;f++)k=
a("<tr></tr>"),h.append(k),g=a("<td class='first'></td>"),k.append(g),g=a("<td colspan='4'></td>"),g.append(this.createTableForGroup(b.groups[f],b)),k.append(g);void 0===b.groupOp&&(b.groupOp=e.p.groupOps[0]);if(void 0!==b.rules)for(f=0;f<b.rules.length;f++)h.append(this.createTableRowForRule(b.rules[f],b));return h};this.createTableRowForRule=function(b,c){var e=this,f=a("<tr></tr>"),g,k,l,z,F="",L;f.append("<td class='first'></td>");var D=a("<td class='columns'></td>");f.append(D);var la=a("<select></select>"),
T,ba=[];D.append(la);la.bind("change",function(){b.field=a(la).val();l=a(this).parents("tr:first");for(g=0;g<e.p.columns.length;g++)if(e.p.columns[g].name===b.field){z=e.p.columns[g];break}if(z){z.searchoptions.id=a.jgrid.randId();h&&"text"===z.inputtype&&!z.searchoptions.size&&(z.searchoptions.size=10);var c=a.jgrid.createEl(z.inputtype,z.searchoptions,"",!0,e.p.ajaxSelectOptions,!0);a(c).addClass("input-elm");k=z.searchoptions.sopt?z.searchoptions.sopt:e.p.sopt?e.p.sopt:"string"===z.searchtype?
e.p.stropts:e.p.numopts;var d="",f="";ba=[];a.each(e.p.ops,function(){ba.push(this.name)});for(g=0;g<k.length;g++)T=a.inArray(k[g],ba),-1!==T&&(f="",0===g&&(b.op=e.p.ops[T].name,f=" selected='selected'"),d+="<option value='"+e.p.ops[T].name+"'"+f+">"+e.p.ops[T].description+"</option>");a(".selectopts",l).empty().append(d);a(".data",l).empty().append(c);a(".input-elm",l).bind("change",function(){b.data=a(this).val();e.onchange()});setTimeout(function(){b.data=a(c).val();e.onchange()},0)}});for(g=D=
0;g<e.p.columns.length;g++){L="undefined"===typeof e.p.columns[g].search?!0:e.p.columns[g].search;var Da=!0===e.p.columns[g].hidden;if(!0===e.p.columns[g].searchoptions.searchhidden&&L||L&&!Da)L="",b.field===e.p.columns[g].name&&(L=" selected='selected'",D=g),F+="<option value='"+e.p.columns[g].name+"'"+L+">"+e.p.columns[g].label+"</option>"}la.append(F);F=a("<td class='operators'></td>");f.append(F);z=d.columns[D];z.searchoptions.id=a.jgrid.randId();h&&"text"===z.inputtype&&!z.searchoptions.size&&
(z.searchoptions.size=10);var D=a.jgrid.createEl(z.inputtype,z.searchoptions,b.data,!0,e.p.ajaxSelectOptions,!0),da=a("<select class='selectopts'></select>");F.append(da);da.bind("change",function(){b.op=a(da).val();l=a(this).parents("tr:first");var c=a(".input-elm",l)[0];"nu"===b.op||"nn"===b.op?(b.data="",c.value="",c.setAttribute("readonly","true"),c.setAttribute("disabled","true")):(c.removeAttribute("readonly"),c.removeAttribute("disabled"));e.onchange()});k=z.searchoptions.sopt?z.searchoptions.sopt:
e.p.sopt?e.p.sopt:"string"===z.searchtype?d.stropts:e.p.numopts;F="";a.each(e.p.ops,function(){ba.push(this.name)});for(g=0;g<k.length;g++)T=a.inArray(k[g],ba),-1!==T&&(L=b.op===e.p.ops[T].name?" selected='selected'":"",F+="<option value='"+e.p.ops[T].name+"'"+L+">"+e.p.ops[T].description+"</option>");da.append(F);F=a("<td class='data'></td>");f.append(F);F.append(D);a(D).addClass("input-elm").bind("change",function(){b.data=a(this).val();e.onchange()});F=a("<td></td>");f.append(F);D=a("<input type='button' value='-' title='Delete rule' class='delete-rule ui-del'/>");
F.append(D);D.bind("click",function(){for(g=0;g<c.rules.length;g++)if(c.rules[g]===b){c.rules.splice(g,1);break}e.reDraw();e.onchange();return!1});return f};this.getStringForGroup=function(a){var b="(",c;if(void 0!==a.groups)for(c=0;c<a.groups.length;c++){1<b.length&&(b+=" "+a.groupOp+" ");try{b+=this.getStringForGroup(a.groups[c])}catch(d){alert(d)}}if(void 0!==a.rules)try{for(c=0;c<a.rules.length;c++)1<b.length&&(b+=" "+a.groupOp+" "),b+=this.getStringForRule(a.rules[c])}catch(d){alert(d)}b+=")";
return"()"===b?"":b};this.getStringForRule=function(b){var c="",e="",f,g;for(f=0;f<this.p.ops.length;f++)if(this.p.ops[f].name===b.op){c=this.p.ops[f].operator;e=this.p.ops[f].name;break}for(f=0;f<this.p.columns.length;f++)if(this.p.columns[f].name===b.field){g=this.p.columns[f];break}f=b.data;if("bw"===e||"bn"===e)f+="%";if("ew"===e||"en"===e)f="%"+f;if("cn"===e||"nc"===e)f="%"+f+"%";if("in"===e||"ni"===e)f=" ("+f+")";d.errorcheck&&l(b.data,g);return-1!==a.inArray(g.searchtype,["int","integer","float",
"number","currency"])||"nn"===e||"nu"===e?b.field+" "+c+" "+f:b.field+" "+c+' "'+f+'"'};this.resetFilter=function(){this.p.filter=a.extend(!0,{},this.p.initFilter);this.reDraw();this.onchange()};this.hideError=function(){a("th.ui-state-error",this).html("");a("tr.error",this).hide()};this.showError=function(){a("th.ui-state-error",this).html(this.p.errmsg);a("tr.error",this).show()};this.toUserFriendlyString=function(){return this.getStringForGroup(d.filter)};this.toString=function(){function a(c){var d=
"(",e;if(void 0!==c.groups)for(e=0;e<c.groups.length;e++)1<d.length&&(d="OR"===c.groupOp?d+" || ":d+" && "),d+=a(c.groups[e]);if(void 0!==c.rules)for(e=0;e<c.rules.length;e++){1<d.length&&(d="OR"===c.groupOp?d+" || ":d+" && ");var f=c.rules[e];if(b.p.errorcheck){for(var g=void 0,h=void 0,g=0;g<b.p.columns.length;g++)if(b.p.columns[g].name===f.field){h=b.p.columns[g];break}h&&l(f.data,h)}d+=f.op+"(item."+f.field+",'"+f.data+"')"}d+=")";return"()"===d?"":d}var b=this;return a(this.p.filter)};this.reDraw();
if(this.p.showQuery)this.onchange();this.filter=!0}}})};a.extend(a.fn.jqFilter,{toSQLString:function(){var a="";this.each(function(){a=this.toUserFriendlyString()});return a},filterData:function(){var a;this.each(function(){a=this.p.filter});return a},getParameter:function(a){return void 0!==a&&this.p.hasOwnProperty(a)?this.p[a]:this.p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(a){"string"===typeof a&&(a=jQuery.jgrid.parse(a));this.each(function(){this.p.filter=
a;this.reDraw();this.onchange()})}})})(jQuery);
var xmlJsonClass={xml2json:function(a,b){9===a.nodeType&&(a=a.documentElement);var e=this.removeWhite(a),e=this.toObj(e),e=this.toJson(e,a.nodeName,"\t");return"{\n"+b+(b?e.replace(/\t/g,b):e.replace(/\t|\n/g,""))+"\n}"},json2xml:function(a,b){var e=function(a,b,c){var d="",l,m;if(a instanceof Array)if(0===a.length)d+=c+"<"+b+">__EMPTY_ARRAY_</"+b+">\n";else for(l=0,m=a.length;l<m;l+=1)var q=c+e(a[l],b,c+"\t")+"\n",d=d+q;else if("object"===typeof a){l=!1;d+=c+"<"+b;for(m in a)a.hasOwnProperty(m)&&
("@"===m.charAt(0)?d+=" "+m.substr(1)+'="'+a[m].toString()+'"':l=!0);d+=l?">":"/>";if(l){for(m in a)a.hasOwnProperty(m)&&("#text"===m?d+=a[m]:"#cdata"===m?d+="<![CDATA["+a[m]+"]]\x3e":"@"!==m.charAt(0)&&(d+=e(a[m],m,c+"\t")));d+=("\n"===d.charAt(d.length-1)?c:"")+"</"+b+">"}}else d="function"===typeof a?d+(c+"<"+b+"><![CDATA["+a+"]]\x3e</"+b+">"):'""'===a.toString()||0===a.toString().length?d+(c+"<"+b+">__EMPTY_STRING_</"+b+">"):d+(c+"<"+b+">"+a.toString()+"</"+b+">");return d},c="",d;for(d in a)a.hasOwnProperty(d)&&
(c+=e(a[d],d,""));return b?c.replace(/\t/g,b):c.replace(/\t|\n/g,"")},toObj:function(a){var b={},e=/function/i;if(1===a.nodeType){if(a.attributes.length){var c;for(c=0;c<a.attributes.length;c+=1)b["@"+a.attributes[c].nodeName]=(a.attributes[c].nodeValue||"").toString()}if(a.firstChild){var d=c=0,f=!1,g;for(g=a.firstChild;g;g=g.nextSibling)1===g.nodeType?f=!0:3===g.nodeType&&g.nodeValue.match(/[^ \f\n\r\t\v]/)?c+=1:4===g.nodeType&&(d+=1);if(f)if(2>c&&2>d)for(this.removeWhite(a),g=a.firstChild;g;g=
g.nextSibling)3===g.nodeType?b["#text"]=this.escape(g.nodeValue):4===g.nodeType?e.test(g.nodeValue)?b[g.nodeName]=[b[g.nodeName],g.nodeValue]:b["#cdata"]=this.escape(g.nodeValue):b[g.nodeName]?b[g.nodeName]instanceof Array?b[g.nodeName][b[g.nodeName].length]=this.toObj(g):b[g.nodeName]=[b[g.nodeName],this.toObj(g)]:b[g.nodeName]=this.toObj(g);else a.attributes.length?b["#text"]=this.escape(this.innerXml(a)):b=this.escape(this.innerXml(a));else if(c)a.attributes.length?b["#text"]=this.escape(this.innerXml(a)):
(b=this.escape(this.innerXml(a)),"__EMPTY_ARRAY_"===b?b="[]":"__EMPTY_STRING_"===b&&(b=""));else if(d)if(1<d)b=this.escape(this.innerXml(a));else for(g=a.firstChild;g;g=g.nextSibling)if(e.test(a.firstChild.nodeValue)){b=a.firstChild.nodeValue;break}else b["#cdata"]=this.escape(g.nodeValue)}a.attributes.length||a.firstChild||(b=null)}else 9===a.nodeType?b=this.toObj(a.documentElement):alert("unhandled node type: "+a.nodeType);return b},toJson:function(a,b,e,c){void 0===c&&(c=!0);var d=b?'"'+b+'"':
"",f="\t",g="\n";c||(g=f="");if("[]"===a)d+=b?":[]":"[]";else if(a instanceof Array){var k,h,l=[];h=0;for(k=a.length;h<k;h+=1)l[h]=this.toJson(a[h],"",e+f,c);d+=(b?":[":"[")+(1<l.length?g+e+f+l.join(","+g+e+f)+g+e:l.join(""))+"]"}else if(null===a)d+=(b&&":")+"null";else if("object"===typeof a){k=[];for(h in a)a.hasOwnProperty(h)&&(k[k.length]=this.toJson(a[h],h,e+f,c));d+=(b?":{":"{")+(1<k.length?g+e+f+k.join(","+g+e+f)+g+e:k.join(""))+"}"}else d="string"===typeof a?d+((b&&":")+'"'+a.replace(/\\/g,
"\\\\").replace(/\"/g,'\\"')+'"'):d+((b&&":")+'"'+a.toString()+'"');return d},innerXml:function(a){var b="";if("innerHTML"in a)b=a.innerHTML;else{var e=function(a){var b="",f;if(1===a.nodeType){b+="<"+a.nodeName;for(f=0;f<a.attributes.length;f+=1)b+=" "+a.attributes[f].nodeName+'="'+(a.attributes[f].nodeValue||"").toString()+'"';if(a.firstChild){b+=">";for(f=a.firstChild;f;f=f.nextSibling)b+=e(f);b+="</"+a.nodeName+">"}else b+="/>"}else 3===a.nodeType?b+=a.nodeValue:4===a.nodeType&&(b+="<![CDATA["+
a.nodeValue+"]]\x3e");return b};for(a=a.firstChild;a;a=a.nextSibling)b+=e(a)}return b},escape:function(a){return a.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(a){a.normalize();var b;for(b=a.firstChild;b;)if(3===b.nodeType)if(b.nodeValue.match(/[^ \f\n\r\t\v]/))b=b.nextSibling;else{var e=b.nextSibling;a.removeChild(b);b=e}else 1===b.nodeType&&this.removeWhite(b),b=b.nextSibling;return a}};
$.fn.toggleClick=function(){var a=arguments,b=a.length;return this.each(function(e,c){var d=0;$(c).click(function(){return a[d++%b].apply(this,arguments)})})};
(function(a){a.jqschedule={calendarid:"#calendar",eventid:"#event",calendarurl:"",locales:{dateFormat:"dd/MM/yyyy",bSave:"Save",bAdd:"Add",bDelete:"Delete",bCancel:"Cancel",bChange:"Change",bClose:"Close",bSearch:"Find",editCaption:"Edit event",addCaption:"Add new event",userCaption:"Change Calendar",searchCaption:"Advanced search"},searchCols:[],searchOpers:[],default_fields:"title allDay location className access start starttime end endtime description user_id".split(" "),_all_fields:[],diff:[],
diff_type:[],loadError:function(a,e,c){alert("Error: "+c+"\nStatus: "+e+"\n"+a.responseText)},customError:function(b){a("body").append("<div id='error-message' title='Erorr'><p>"+b+"</p></div>");a("#error-message").dialog({modal:!0,close:function(){a(this).dialog("destroy")},buttons:{Ok:function(){a(this).dialog("close")}}})},gotoDayEventView:function(b,e){a("#b_search_cal").trigger("click");var c=a.fullCalendar.parseDate(parseInt(b,10));a(a.jqschedule.calendarid).fullCalendar("gotoDate",c.getFullYear(),
c.getMonth(),c.getDate());a(a.jqschedule.calendarid).fullCalendar("changeView","agendaDay")},setCustomEditFields:function(b,e){a.jqschedule.diff=[];a.jqschedule.diff_type=[];a.each(a("form",b)[0].elements,function(b,d){if(-1===a.inArray(d.id,a.jqschedule.default_fields)&&e.hasOwnProperty(d.id))if(a.jqschedule.diff.push(d.id),a.jqschedule.diff_type.push(d.type),"checkbox"===d.type)"1"==e[d.id]?a("#"+d.id).prop("checked",!0):a("#"+d.id).prop("checked",!1);else if("select-multiple"===d.type){var f=e[d.id].split(","),
g=0,k=f.length,h=a("#"+d.id+" option"),f=a.map(f,function(b){return a.trim(b)});for(g;g<k;g++)h.filter('[value="'+f[g]+'"]').prop("selected",!0)}else a("#"+d.id).val(e[d.id])})},eventEditDialog:function(b,e,c){var d=a(a.jqschedule.eventid);a("input,textarea,select",d).val("");b.allDay?a("#endtime, #starttime",d).hide():a("#endtime, #starttime",d).show();a("#allDay",d).attr("checked",b.allDay);a("#title",d).val(b.title);setTimeout(function(){a("#description",d).val(b.description)},100);a("#location",
d).val(b.location);a("#className",d).val(b.className);a("#access",d).val(b.access);a("#start",d).val(a.fullCalendar.formatDate(b.start,a.jqschedule.locales.dateFormat));a("#starttime",d).val(a.fullCalendar.formatDate(b.start,"HH:mm"));a("#end",d).val(a.fullCalendar.formatDate(b.end?b.end:b.start,a.jqschedule.locales.dateFormat));a("#endtime").val(a.fullCalendar.formatDate(b.end?b.end:b.start,"HH:mm"));a("#user_id",d).val(b.user_id);a.jqschedule.setCustomEditFields(d,b);e={};var f=a("#start",d).datepicker("option",
"dateFormat"),g;e[a.jqschedule.locales.bSave]=function(){var c=a.datepicker.parseDate(f,a("#start",d).val()),e=a("#starttime",d).val(),e=e?e.split(":"):["0","0"];c.setHours(parseInt(e[0],10),parseInt(e[1],10));(e=a.datepicker.parseDate(f,a("#end",d).val()))||(e=a.datepicker.parseDate(f,a("#start",d).val()));var l=a("#endtime",d).val(),l=l?l.split(":"):["0","0"];e.setHours(parseInt(l[0],10),parseInt(l[1],10));0>e.getTime()-c.getTime()?alert("End time is little than start time"):(b.start=c,b._start=
c,b.end=e,b._end=e,a("#allDay",d).is(":checked")?b.allDay=!0:b.allDay=!1,b.title=a("#title",d).val(),""===a.trim(b.title)?alert("Title is required"):(b.description=a("#description",d).val(),b.location=a("#location",d).val(),b.className=a("#className",d).val(),b.access=a("#access",d).val(),b.user_id=a("#user_id",d).val(),g={},g.event_id=b.id,g.start=b.start.getTime()/1E3,g.end=b.end.getTime()/1E3,g.title=b.title,g.description=b.description,g.location=b.location,g.className=b.className,g.access=b.access,
g.user_id=b.user_id,g.all_day=b.allDay?1:0,g.oper="editEvent",a.each(a.jqschedule.diff,function(c,e){var f;f="checkbox"===a.jqschedule.diff_type[c]?a("#"+e,d).is(":checked")?"1":"0":"select-multiple"===a.jqschedule.diff_type[c]?a("#"+e,d).val().join():a("#"+e,d).val();b[e]=g[e]=f}),a.ajax({url:a.jqschedule.calendarurl,data:g,type:"post",dataType:"json",success:function(c){c.hasOwnProperty("error")&""!==c.error?a.jqschedule.customError(c.errorMsg||"Error"):(a(a.jqschedule.calendarid).fullCalendar("updateEvent",
b),d.dialog("close"))},error:function(b,c,d){a.isFunction(a.jqschedule.loadError)&&a.jqschedule.loadError(b,c,d)}})))};e[a.jqschedule.locales.bDelete]=function(){g={};g.event_id=b.id;g.oper="removeEvent";a.ajax({url:a.jqschedule.calendarurl,data:g,type:"post"});a(a.jqschedule.calendarid).fullCalendar("removeEvents",b.id);d.dialog("close")};e[a.jqschedule.locales.bCancel]=function(){d.dialog("close")};d.dialog({modal:!0,width:490,closeOnEscape:!1,position:{at:"center bottom",of:a.jqschedule.calendarid},
title:a.jqschedule.locales.editCaption,close:function(){d.dialog("destroy");d.hide();d=null},buttons:e}).show();a(".ui-dialog").css({"font-size":"12px","z-index":1000004});return!1},eventViewDialog:function(b,e,c){var d=a(a.jqschedule.eventid);a("input,textarea,select",d).val("");b.allDay?a("#endtime, #starttime",d).hide():a("#endtime, #starttime",d).show();a("#allDay",d).attr("checked",b.allDay);a("#title",d).val(b.title);setTimeout(function(){a("#description",d).val(b.description)},100);a("#location",
d).val(b.location);a("#className",d).val(b.className);a("#access",d).val(b.access);a("#start",d).val(a.fullCalendar.formatDate(b.start,a.jqschedule.locales.dateFormat));a("#starttime",d).val(a.fullCalendar.formatDate(b.start,"HH:mm"));a("#end",d).val(a.fullCalendar.formatDate(b.end?b.end:b.start,a.jqschedule.locales.dateFormat));a("#endtime").val(a.fullCalendar.formatDate(b.end?b.end:b.start,"HH:mm"));a("#user_id",d).val(b.user_id);a.jqschedule.setCustomEditFields(d,b);e={};e[a.jqschedule.locales.bClose]=
function(){d.dialog("close")};d.dialog({modal:!0,width:490,closeOnEscape:!1,position:{at:"center bottom",of:a.jqschedule.calendarid},title:a.jqschedule.locales.editCaption,close:function(){d.dialog("destroy");d.hide();d=null},buttons:e}).show();a(".ui-dialog").css({"font-size":"12px","z-index":1000004});return!1},eventAddDialog:function(b,e,c,d){var f=a(a.jqschedule.eventid);a("input,textarea,select",f).val("");e?a("#endtime, #starttime",f).hide():a("#endtime, #starttime",f).show();a("#allDay",f).attr("checked",
e);setTimeout(function(){a("#description",f).val("")},100);a("#start",f).val(a.fullCalendar.formatDate(b,a.jqschedule.locales.dateFormat));a("#starttime",f).val(a.fullCalendar.formatDate(b,"HH:mm"));a("#end",f).val(a.fullCalendar.formatDate(b,a.jqschedule.locales.dateFormat));a("#endtime",f).val(a.fullCalendar.formatDate(b,"HH:mm"));b=a("#switchuser").val();a.isArray(b)&&(b=b[0]);a("#user_id",f).val(b);a.jqschedule.diff=[];a.jqschedule.diff_type=[];a.each(a("form",f)[0].elements,function(b,c){-1===
a.inArray(c.id,a.jqschedule.default_fields)&&(a.jqschedule.diff.push(c.id),a.jqschedule.diff_type.push(c.type),"checkbox"===c.type&&a("#"+c.id).prop("checked",!1))});b={};var g=a("#start",f).datepicker("option","dateFormat"),k,h;b[a.jqschedule.locales.bAdd]=function(){h={};var b=a.datepicker.parseDate(g,a("#start",f).val()),c=a("#starttime",f).val(),c=c?c.split(":"):["0","0"];b.setHours(parseInt(c[0],10),parseInt(c[1],10));(c=a.datepicker.parseDate(g,a("#end",f).val()))||(c=a.datepicker.parseDate(g,
a("#start",f).val()));var d=a("#endtime").val(),d=d?d.split(":"):["0","0"];c.setHours(parseInt(d[0],10),parseInt(d[1],10));0>c.getTime()-b.getTime()?alert("End time is little than start time"):(h.start=b,h._start=b,h.end=c,h._end=c,a("#allDay",f).is(":checked")?h.allDay=!0:h.allDay=!1,h.title=a("#title",f).val(),""===a.trim(h.title)?alert("Title is required"):(h.description=a("#description",f).val(),h.location=a("#location",f).val(),h.className=a("#className",f).val(),h.access=a("#access",f).val(),
""===a.trim(h.className)||""===a.trim(h.access)?alert("Category or Access are requiered!"):(h.user_id=a("#user_id",f).val(),k={},k.start=h.start.getTime()/1E3,k.end=h.end.getTime()/1E3,k.title=h.title,k.description=h.description,k.location=h.location,k.className=h.className,k.access=h.access,k.user_id=h.user_id,k.all_day=h.allDay?1:0,k.oper="newEvent",a.each(a.jqschedule.diff,function(b,c){var d;d="checkbox"===a.jqschedule.diff_type[b]?a("#"+c,f).is(":checked")?"1":"0":"select-multiple"===a.jqschedule.diff_type[b]?
a("#"+c,f).val().join():a("#"+c,f).val();h[c]=k[c]=d}),a.ajax({url:a.jqschedule.calendarurl,data:k,dataType:"json",type:"POST",success:function(b,c){b.hasOwnProperty("error")&""!==b.error?a.jqschedule.customError(b.errorMsg||"Error"):b.event_id&&(h.id=b.event_id,h._id=b.event_id,a(a.jqschedule.calendarid).fullCalendar("renderEvent",h,!1),f.dialog("close"))},error:function(b,c,d){a.isFunction(a.jqschedule.loadError)&&a.jqschedule.loadError(b,c,d)}}))))};b[a.jqschedule.locales.bCancel]=function(){f.dialog("close")};
f.dialog({modal:!0,width:490,position:{at:"center bottom",of:a.jqschedule.calendarid},closeOnEscape:!1,title:a.jqschedule.locales.addCaption,close:function(){f.dialog("destroy");f.hide();f=null},buttons:b}).show();a(".ui-dialog").css({"font-size":"12px","z-index":1000004})},eventLoading:function(b){if(b){b=a(".calwrapper").width();var e=a(".calwrapper").height()+10;a("body").append('<div class="ui-widget-overlay" style="width:'+b+"px;height:"+e+'px;z-index: 1001;"></div>');a("#progresspar").show()}else a(".ui-widget-overlay").remove(),
a("#progresspar").hide()},eventDrop:function(b,e,c,d,f){null==b.end&&(b.end=b.start);a.ajax({url:a.jqschedule.calendarurl,data:{oper:"moveEvent",event_id:b.id,start:b.start.getTime()/1E3,end:b.end.getTime()/1E3,all_day:d?1:0},type:"post",error:function(b,c,d){a.isFunction(a.jqschedule.loadError)&&a.jqschedule.loadError(b,c,d)}})},eventResize:function(b,e,c,d,f,g,k){null==b.end&&(b.end=b.start);a.ajax({url:a.jqschedule.calendarurl,data:{oper:"resizeEvent",event_id:b.id,start:b.start.getTime()/1E3,
end:b.end.getTime()/1E3},type:"post",error:function(b,c,d){a.isFunction(a.jqschedule.loadError)&&a.jqschedule.loadError(b,c,d)}})},eventRender:function(a,e,c){try{a.description&&e.tooltip({position:{my:"left bottom",at:"center top",offset:"-30 -10",of:e},content:function(c){return a.description}})}catch(d){}},changeCalendarUser:function(){var b=a("#caluser");b.dialog({modal:!0,width:400,title:a.jqschedule.locales.userCaption,close:function(){b.dialog("destroy");b.hide();b=null},buttons:[{text:a.jqschedule.locales.bChange,
click:function(){var e=a("#switchuser",this).val();a.ajax({url:a.jqschedule.calendarurl,data:{_user_id:e,oper:"switchUser"},type:"post",success:function(b,d){a(a.jqschedule.calendarid).fullCalendar("refetchEvents");a("#common_search").val("");a(".fnd-results").html("");a("#search_table").empty();var e=a("#switchuser option:selected");if(1>=e.length)a("#cal_user").html("<li>"+e.text()+"</li>");else{var g="";a.each(e,function(){g+="<li>"+a(this).text()+"</li>"});a("#cal_user").html(g)}}});b.dialog("close")}},
{text:a.jqschedule.locales.bCancel,click:function(){b.dialog("close")}}]}).show();a(".ui-dialog, .ui-dialog-buttonpane").css({"font-size":"12px","z-index":1000004});return!1},printEvents:function(){if(a("#b_search_cal").hasClass("ui-state-active")){var b=a("#common_search").val(),e="simple";if(""===b){var e="complex",c=a("#search_cal");if(c){c=c.jqFilter("filterData");if(!c.rules.length)return!1;try{b=xmlJsonClass.toJson(c,"","",!1)}catch(d){try{b=JSON.stringify(c)}catch(f){}}}}window.location=a.jqschedule.calendarurl+
"?oper=printEvents&stype="+e+"&search=true&svalue="+b}else e=jQuery(a.jqschedule.calendarid).fullCalendar("getView"),b=e.start.getTime()/1E3,e=e.end.getTime()/1E3,window.location=a.jqschedule.calendarurl+"?oper=printEvents&start="+b+"&end="+e;return!1},exportEvents:function(){if(a("#b_search_cal").hasClass("ui-state-active")){var b=a("#common_search").val(),e="simple";if(""===b){var e="complex",c=a("#search_cal");if(c){c=c.jqFilter("filterData");if(!c.rules.length)return!1;try{b=xmlJsonClass.toJson(c,
"","",!1)}catch(d){try{b=JSON.stringify(c)}catch(f){}}}}window.location=a.jqschedule.calendarurl+"?oper=exportEvents&stype="+e+"&search=true&svalue="+b}else e=jQuery(a.jqschedule.calendarid).fullCalendar("getView"),b=e.start.getTime()/1E3,e=e.end.getTime()/1E3,window.location=a.jqschedule.calendarurl+"?oper=exportEvents&start="+b+"&end="+e;return!1},showSearch:function(){a("#common_search").val()&&(a("#common_search").val(""),a("#b_common_search").trigger("click"));a(this).addClass("ui-state-active");
a(".fc-view-agendaWeek, .fc-view-agendaDay, .fc-view-basicDay, .fc-view-basickWeek, .fc-view-month, .fc-view-year").hide();a(".fc-view-search").show();a("#common_search").focus()},hideSearch:function(){a(this).removeClass("ui-state-active");var b=a(a.jqschedule.calendarid).fullCalendar("getView").name;a(".fc-view-search").hide();a(".fc-view-"+b).show()},_filSearchTable:function(b,e){a(e).empty();if(b&&b.length){a(".fnd-results").html(b.length);var c="",d=0;a.jqschedule._all_fields=[];a.each(b,function(){0===
d&&(a.jqschedule._all_fields=a.map(this,function(a,b){return b}));var b=a.fullCalendar.parseDate(this.start),e=a.fullCalendar.parseDate(this.end),k=a.fullCalendar.formatDate(b,"HH:mm"),h=a.fullCalendar.formatDate(e,"HH:mm"),k=this.allDay?"all day":k+" - "+h,b=a.fullCalendar.formatDate(b,"ddd  dd MMM yyyy"),e=a.fullCalendar.formatDate(e,"ddd  dd MMM yyyy");b!==e&&(k+=" "+e);c+="<tr id='"+this.id+"'><th class='ui-event-cell ui-widget-content'><a href=\"javascript:jQuery.jqschedule.gotoDayEventView('"+
this.start+"');\">"+b+"</a></th><td class='ui-event-time ui-widget-content'>"+k+"</td><td class='ui-event-title ui-widget-content'><a href=\"javascript:jQuery.jqschedule.editFromSearch('"+this.id+"');\" class='' style='border: 0px none;text-decoration:  underline;'>"+this.title+"</a></td>";c+="<td class='source' style='display:none;'>";c+=a.map(this,function(a,b){return a}).join("~`");c+="</td>";c+="</tr>";d++});a(e).append(c)}},doSimpleSearch:function(){var b=a("#common_search").val();b?a.ajax({url:a.jqschedule.calendarurl,
data:{search:!0,stype:"simple",svalue:b,oper:"getEvent"},dataType:"json",type:"POST",success:function(b,c){a.jqschedule._filSearchTable(b,"#search_table")},error:function(b,c,d){a.isFunction(a.jqschedule.loadError)&&a.jqschedule.loadError(b,c,d)}}):(a(".fnd-results").html(""),a("#search_table").empty())},buildLocalSearch:function(){var b,e;a("label",a.jqschedule.eventid).each(function(c){b={};b.name=a(this).attr("for");b.label=a(this).html();"className"===b.name||"access"===b.name?(b.inputtype="select",
e={},a("#"+b.name+" option",a.jqschedule.eventid).each(function(){e[a(this).val()]=a(this).text()}),b.searchoptions={value:e}):"allDay"===b.name?(b.inputtype="select",e={1:"Yes",0:"No"},b.searchoptions={value:e}):"start"===b.name||"end"===b.name?(b.searchtype="date",b.searchoptions={size:20,sopt:["eq","gt","ge","lt","le"],dataInit:function(b){a(b).datetimepicker()}}):b.searchoptions={size:20};a.jqschedule.searchCols[c]=b})},advancedSearchDlg:function(){a("#search_cal").jqFilter({columns:a.jqschedule.searchCols,
filter:{groupOp:"AND",rules:[{field:a.jqschedule.searchCols[0].name,op:"eq",data:""}]},_gridsopt:a.jqschedule.searchOpers});a("#search_cal").dialog({modal:!0,width:"auto",autoOpen:!1,title:a.jqschedule.locales.searchCaption,close:function(){},buttons:[{text:a.jqschedule.locales.bSearch,click:function(){var b=a("#search_cal"),e,c=b.jqFilter("filterData");if(c.rules.length){try{e=xmlJsonClass.toJson(c,"","",!1)}catch(d){try{e=JSON.stringify(c)}catch(f){}}e&&a.ajax({url:a.jqschedule.calendarurl,data:{search:!0,
stype:"complex",svalue:e,oper:"getEvent"},dataType:"json",type:"POST",success:function(b,c){a.jqschedule._filSearchTable(b,"#search_table")},error:function(b,c,e){a.isFunction(a.jqschedule.loadError)&&a.jqschedule.loadError(b,c,e)}});b.dialog("close")}}},{text:a.jqschedule.locales.bClose,click:function(){a("#search_cal").dialog("close")}}]});a(".ui-dialog, .ui-dialog-buttonpane").css({"font-size":"12px","z-index":1000004})},editFromSearch:function(b){var e=a("tr#"+b+" td.source").html().split("~`"),
c={};a.each(a.jqschedule._all_fields,function(a,b){if("start"===b||"end"===b)e[a]=new Date(1E3*parseFloat(e[a]));"allDay"===b&&(e[a]="1"==e[a]?!0:!1);c[b]=e[a]});a.jqschedule.eventViewDialog(c)},openDaySearchDlg:function(b,e,c){var d=b.getTime()/1E3;b.setHours(23);b.setMinutes(23);var f=b.getTime()/1E3,g=a("#day_dialog");g.dialog({modal:!0,width:450,close:function(){g.dialog("destroy");g.hide();g=null},open:function(b,c){a("#day_table").empty();a.ajax({url:a.jqschedule.calendarurl,data:{oper:"getEvent",
start:d,end:f},dataType:"json",type:"POST",success:function(b,c){a.jqschedule._filSearchTable(b,"#day_table")},error:function(b,c,d){a.isFunction(a.jqschedule.loadError)&&a.jqschedule.loadError(b,c,d)}})},buttons:[{text:a.jqschedule.locales.bClose,click:function(){g.dialog("close")}}]}).show();a(".ui-dialog, .ui-dialog-buttonpane").css({"font-size":"12px","z-index":1000004})},eventsFunc:function(b,e,c){a.ajax({url:a.jqschedule.calendarurl,dataType:"json",type:"POST",data:{oper:"getEvent",start:b.getTime()/
1E3,end:e.getTime()/1E3},success:function(a,b){c(a)},error:function(b,c,e){a.isFunction(a.jqschedule.loadError)&&(a.jqschedule.eventLoading(!1),a.jqschedule.loadError(b,c,e))}})},processScript:function(){a("#datepicker").datepicker({dateFormat:"yy-mm-dd",onSelect:function(b,e){var c=b.split("-");a(a.jqschedule.calendarid).fullCalendar("gotoDate",parseInt(c[0],10),parseInt(c[1],10)-1,parseInt(c[2],10))}});a("#start, #end",a.jqschedule.eventid).datepicker();a("#allDay",a.jqschedule.eventid).click(function(){this.checked?
a("#endtime, #starttime",a.jqschedule.eventid).val("00:00").hide():a("#endtime, #starttime",a.jqschedule.eventid).show()});a(".custbutton").height(a("table.fc-header").height());a("#b_user_change").click(jQuery.jqschedule.changeCalendarUser);a("#b_export_ical").click(jQuery.jqschedule.exportEvents);a("#b_print_cal").click(jQuery.jqschedule.printEvents);a(".fc-content",a.jqschedule.calendarid).append(a(".fc-view-search"));a("#b_search_cal").toggleClick(jQuery.jqschedule.showSearch,jQuery.jqschedule.hideSearch);
a("#b_common_search").click(jQuery.jqschedule.doSimpleSearch);a("#b_adv_search").click(function(){a("#search_cal").dialog("open");return!1});a(".jq-button").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});a.jqschedule.buildLocalSearch();a.jqschedule.advancedSearchDlg()}}})(jQuery);
